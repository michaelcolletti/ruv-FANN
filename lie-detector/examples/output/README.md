# Output Directory

This directory contains output files generated by the Veritas Nexus examples.

## Generated Files

Examples will create output files in various formats:

### Analysis Results
- `basic_results.json` - Results from basic_detection.rs
- `batch_results.csv` - Batch processing results in CSV format
- `batch_results.json` - Batch processing results in JSON format
- `streaming_results.jsonl` - Real-time analysis results
- `fusion_comparison.json` - Multi-modal fusion strategy comparison
- `training_logs.txt` - Cascade training progress logs

### Reports and Explanations
- `explanation_report.html` - HTML-formatted explanation report
- `explanation_report.txt` - Text-formatted explanation report
- `explanation_report.json` - JSON-formatted explanation data
- `decision_pathway.svg` - Decision pathway visualization
- `uncertainty_analysis.json` - Detailed uncertainty quantification

### Performance Metrics
- `performance_metrics.json` - Processing time and resource usage
- `benchmark_results.csv` - Performance comparison across strategies
- `memory_usage.log` - Memory consumption tracking
- `gpu_utilization.log` - GPU usage statistics (if applicable)

### MCP Server Outputs
- `mcp_server.log` - Server operation logs
- `mcp_tool_calls.json` - Record of tool invocations
- `mcp_client_sessions.json` - Client session information

## File Formats

### JSON Format
Standard JSON for structured data:
```json
{
  "analysis_id": "unique_identifier",
  "timestamp": "2024-01-15T14:30:00Z",
  "decision": "deceptive",
  "confidence": 0.78,
  "processing_time_ms": 1250,
  "modality_scores": {
    "vision": 0.82,
    "audio": 0.71,
    "text": 0.85
  },
  "explanation": "Detailed explanation..."
}
```

### CSV Format
Tabular data for analysis and reporting:
```csv
id,decision,confidence,vision_score,audio_score,text_score,processing_time_ms
sample_001,deceptive,0.78,0.82,0.71,0.85,1250
sample_002,truthful,0.84,0.23,0.31,0.28,987
```

### JSON Lines Format
Streaming data with one JSON object per line:
```
{"id":"stream_001","decision":"deceptive","confidence":0.78,"timestamp":"2024-01-15T14:30:00Z"}
{"id":"stream_002","decision":"truthful","confidence":0.84,"timestamp":"2024-01-15T14:30:01Z"}
```

### HTML Format
Human-readable reports with formatting:
```html
<!DOCTYPE html>
<html>
<head><title>Analysis Report</title></head>
<body>
  <h1>Lie Detection Analysis Report</h1>
  <div class="decision">Decision: Deceptive (78% confidence)</div>
  <div class="explanation">...</div>
</body>
</html>
```

## File Organization

Files are organized by example and date:

```
output/
├── 2024-01-15/
│   ├── basic_detection/
│   ├── batch_processing/
│   ├── real_time_analysis/
│   └── explainable_decisions/
├── 2024-01-16/
│   └── ...
└── latest/           # Symlinks to most recent outputs
    ├── batch_results.json
    ├── explanation_report.html
    └── performance_metrics.json
```

## Example Output Contents

### Basic Detection Results
```json
{
  "examples": [
    {
      "name": "Text-only Analysis",
      "input": "I definitely did not take any money...",
      "result": {
        "decision": "deceptive",
        "confidence": 0.73,
        "text_score": 0.78,
        "reasoning": [
          "Processing text input...",
          "Text analysis complete. Score: 0.780",
          "Final decision: Deceptive (confidence: 73.0%)"
        ]
      }
    }
  ]
}
```

### Batch Processing Results
```csv
id,decision,confidence,processing_time_ms,vision_score,audio_score,text_score,error
batch_001,deceptive,0.67,145,,,0.72,
batch_002,truthful,0.84,203,0.31,0.28,0.25,
batch_003,uncertain,0.45,89,,,0.55,
```

### Explanation Report (HTML snippet)
```html
<div class="analysis-summary">
  <h2>Decision: Deceptive (78.2% confidence)</h2>
  <p>The analysis suggests the subject may be engaging in deception...</p>
  
  <h3>Key Evidence</h3>
  <ul>
    <li><strong>Micro-expressions (Video):</strong> Strong indicators detected</li>
    <li><strong>Voice Stress (Audio):</strong> Elevated stress patterns</li>
    <li><strong>Uncertainty Markers (Text):</strong> High frequency detected</li>
  </ul>
  
  <h3>Uncertainty Analysis</h3>
  <p>Total uncertainty: 21.8%</p>
  <p>Confidence interval: 56.4% - 89.1%</p>
</div>
```

### Performance Metrics
```json
{
  "benchmark": "multi_modal_fusion_comparison",
  "timestamp": "2024-01-15T14:30:00Z",
  "system_info": {
    "cpu": "Intel i7-10700K",
    "memory_gb": 32,
    "gpu": "NVIDIA RTX 3080"
  },
  "results": {
    "early_fusion": {
      "avg_processing_time_ms": 156,
      "accuracy": 0.87,
      "memory_usage_mb": 245
    },
    "late_fusion": {
      "avg_processing_time_ms": 142,
      "accuracy": 0.84,
      "memory_usage_mb": 198
    },
    "attention_fusion": {
      "avg_processing_time_ms": 189,
      "accuracy": 0.91,
      "memory_usage_mb": 312
    }
  }
}
```

## Data Retention

Output files are managed according to these policies:

- **Recent Results**: Last 30 days kept automatically
- **Important Results**: Manually preserved results marked with `.keep` extension
- **Large Files**: Compressed after 7 days
- **Logs**: Rotated daily, kept for 14 days
- **Temporary Files**: Cleaned up after 24 hours

## Privacy and Security

Output files may contain sensitive information:

1. **No Personal Data**: Examples use synthetic data only
2. **Access Control**: Ensure appropriate file permissions
3. **Cleanup**: Remove outputs when no longer needed
4. **Encryption**: Consider encryption for sensitive results
5. **Audit Trail**: Log access to result files

## Viewing Results

### JSON Files
```bash
# Pretty-print JSON results
jq '.' output/latest/batch_results.json

# Extract specific fields
jq '.results[] | {id: .id, decision: .decision, confidence: .confidence}' output/batch_results.json
```

### CSV Files
```bash
# View CSV with column headers
column -t -s, output/batch_results.csv | head -20

# Sort by confidence
sort -t, -k3 -nr output/batch_results.csv
```

### HTML Reports
```bash
# Open in browser
open output/explanation_report.html

# Convert to text
lynx -dump output/explanation_report.html
```

### Log Files
```bash
# Monitor real-time logs
tail -f output/mcp_server.log

# Search for errors
grep -i error output/*.log
```

## Integration with External Tools

### Data Analysis
```python
import pandas as pd
import json

# Load batch results
df = pd.read_csv('output/batch_results.csv')
print(df.describe())

# Load JSON results
with open('output/explanation_report.json') as f:
    data = json.load(f)
```

### Visualization
```python
import matplotlib.pyplot as plt

# Plot confidence distribution
plt.hist(df['confidence'], bins=20)
plt.xlabel('Confidence Score')
plt.ylabel('Frequency')
plt.title('Confidence Score Distribution')
plt.show()
```

### Database Storage
```sql
-- Create table for results
CREATE TABLE analysis_results (
    id VARCHAR(50) PRIMARY KEY,
    decision VARCHAR(20),
    confidence DECIMAL(3,2),
    processing_time_ms INTEGER,
    created_at TIMESTAMP
);

-- Load CSV data
COPY analysis_results FROM 'output/batch_results.csv' 
WITH CSV HEADER;
```

## Troubleshooting

### File Not Found
- Check that examples have been run successfully
- Verify output directory permissions
- Ensure sufficient disk space

### Corrupted Files
- Re-run the example to regenerate
- Check for disk errors or interruptions
- Verify file permissions and ownership

### Large File Sizes
- Enable compression for large outputs
- Adjust batch sizes to reduce memory usage
- Clean up temporary files regularly

### Performance Issues
- Monitor disk I/O during output generation
- Use SSD storage for better performance
- Consider output format optimization

This directory structure helps organize and manage the various outputs generated by the Veritas Nexus examples, making it easy to analyze results and track system performance over time.