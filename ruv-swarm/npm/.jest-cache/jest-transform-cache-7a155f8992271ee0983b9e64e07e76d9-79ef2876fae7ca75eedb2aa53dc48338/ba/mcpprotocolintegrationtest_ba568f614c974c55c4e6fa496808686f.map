{"version":3,"names":["strict","assert","fs","path","fileURLToPath","spawn","__filename","import","meta","url","__dirname","dirname","MCPProtocolIntegrationTestSuite","constructor","results","totalTests","passed","failed","errors","coverage","protocol","communication","serialization","errorHandling","performance","security","compatibility","stress","runTest","name","testFn","_this","_asyncToGenerator","console","log","error","push","message","testMCPProtocolBasics","_this2","mcpMessage","jsonrpc","method","params","arguments","topology","id","mcpResponse","result","content","type","text","Array","isArray","mcpErrorResponse","code","data","details","toolListRequest","testMCPCommunication","_this3","request","verbose","response","JSON","stringify","status","agents","batchRequest","batchResponse","map","req","length","notification","level","logger","undefined","startsWith","testMCPSerialization","_this4","originalMessage","capabilities","config","timeout","retries","priority","serialized","deserialized","parse","binaryData","Buffer","from","base64Data","toString","messageWithBinary","encoding","recoveredBinary","unicodeMessage","emoji","math","quotes","includes","testMCPErrorHandling","_this5","invalidRequest","errorResponse","unknownMethodRequest","invalidParamsRequest","malformedJSON","fail","parseErrorResponse","testMCPPerformance","_this6","largeArray","fill","_","i","largeRequest","metadata","count","timestamp","Date","now","startTime","endTime","processingTime","createRequest","metric","requests","responses","metrics","cpu","Math","random","initialMemory","process","memoryUsage","largeObjects","peakMemory","global","gc","finalMemory","memoryIncrease","heapUsed","memoryRecovered","testMCPSecurity","_this7","maliciousRequest","command","sql","sanitizedArgs","replace","oversizedData","repeat","oversizedRequest","requestSize","maxSize","allowedMethods","unauthorizedRequest","isAllowed","testMCPCompatibility","_this8","clientFormats","client","format","contentTypes","structured","mimeType","resource","uri","generateReport","passRate","toFixed","totalCoverage","Object","values","reduce","a","b","report","toISOString","summary","totalCoveragePoints","recommendations","generateRecommendations","run","_this9","entries","forEach","area","rec","reportPath","join","mkdirSync","recursive","writeFileSync","argv","testSuite","exit"],"sources":["mcp-protocol-integration.test.js"],"sourcesContent":["\n\n/**\n * Comprehensive MCP Protocol Integration Test Suite\n * Tests the MCP protocol handling and communication\n * \n * @author Test Coverage Champion\n * @version 1.0.0\n */\n\nimport { strict as assert } from 'assert';\nimport fs from 'fs';\nimport path from 'path';\nimport { fileURLToPath } from 'url';\nimport { spawn } from 'child_process';\n\nconst __filename = fileURLToPath(import.meta.url);\nconst __dirname = path.dirname(__filename);\n\nclass MCPProtocolIntegrationTestSuite {\n  constructor() {\n    this.results = {\n      totalTests: 0,\n      passed: 0,\n      failed: 0,\n      errors: [],\n      coverage: {\n        protocol: 0,\n        communication: 0,\n        serialization: 0,\n        errorHandling: 0,\n        performance: 0,\n        security: 0,\n        compatibility: 0,\n        stress: 0\n      }\n    };\n  }\n\n  async runTest(name, testFn) {\n    this.results.totalTests++;\n    try {\n      await testFn();\n      this.results.passed++;\n      console.log(`✅ ${name}`);\n      return true;\n    } catch (error) {\n      this.results.failed++;\n      this.results.errors.push({ name, error: error.message });\n      console.log(`❌ ${name}: ${error.message}`);\n      return false;\n    }\n  }\n\n  // Test MCP Protocol Basics\n  async testMCPProtocolBasics() {\n    console.log('\\n🔍 Testing MCP Protocol Basics...');\n\n    await this.runTest('Protocol - Message structure validation', async () => {\n      const mcpMessage = {\n        jsonrpc: '2.0',\n        method: 'tools/call',\n        params: {\n          name: 'swarm_init',\n          arguments: { topology: 'mesh' }\n        },\n        id: 1\n      };\n      \n      // Validate required fields\n      assert(mcpMessage.jsonrpc === '2.0', 'Should have correct JSON-RPC version');\n      assert(typeof mcpMessage.method === 'string', 'Should have method field');\n      assert(typeof mcpMessage.params === 'object', 'Should have params object');\n      assert(typeof mcpMessage.id !== 'undefined', 'Should have request ID');\n      \n      this.results.coverage.protocol++;\n    });\n\n    await this.runTest('Protocol - Response structure validation', async () => {\n      const mcpResponse = {\n        jsonrpc: '2.0',\n        result: {\n          content: [\n            {\n              type: 'text',\n              text: 'Swarm initialized successfully'\n            }\n          ]\n        },\n        id: 1\n      };\n      \n      assert(mcpResponse.jsonrpc === '2.0', 'Response should have correct JSON-RPC version');\n      assert(typeof mcpResponse.result === 'object', 'Should have result object');\n      assert(Array.isArray(mcpResponse.result.content), 'Should have content array');\n      \n      this.results.coverage.protocol++;\n    });\n\n    await this.runTest('Protocol - Error response structure', async () => {\n      const mcpErrorResponse = {\n        jsonrpc: '2.0',\n        error: {\n          code: -32602,\n          message: 'Invalid params',\n          data: {\n            details: 'topology parameter is required'\n          }\n        },\n        id: 1\n      };\n      \n      assert(mcpErrorResponse.jsonrpc === '2.0', 'Error response should have correct JSON-RPC version');\n      assert(typeof mcpErrorResponse.error === 'object', 'Should have error object');\n      assert(typeof mcpErrorResponse.error.code === 'number', 'Error should have numeric code');\n      assert(typeof mcpErrorResponse.error.message === 'string', 'Error should have message');\n      \n      this.results.coverage.protocol++;\n    });\n\n    await this.runTest('Protocol - Tool list request', async () => {\n      const toolListRequest = {\n        jsonrpc: '2.0',\n        method: 'tools/list',\n        params: {},\n        id: 2\n      };\n      \n      assert(toolListRequest.method === 'tools/list', 'Should request tool list');\n      assert(typeof toolListRequest.params === 'object', 'Should have params object');\n      \n      this.results.coverage.protocol++;\n    });\n  }\n\n  // Test MCP Communication\n  async testMCPCommunication() {\n    console.log('\\n🔍 Testing MCP Communication...');\n\n    await this.runTest('Communication - JSON-RPC request/response cycle', async () => {\n      // Simulate a complete request/response cycle\n      const request = {\n        jsonrpc: '2.0',\n        method: 'tools/call',\n        params: {\n          name: 'swarm_status',\n          arguments: { verbose: false }\n        },\n        id: 3\n      };\n      \n      // Simulate processing\n      const response = {\n        jsonrpc: '2.0',\n        result: {\n          content: [\n            {\n              type: 'text',\n              text: JSON.stringify({ status: 'active', agents: 0 })\n            }\n          ]\n        },\n        id: request.id\n      };\n      \n      assert(response.id === request.id, 'Response ID should match request ID');\n      assert(response.result.content[0].type === 'text', 'Should return text content');\n      \n      this.results.coverage.communication++;\n    });\n\n    await this.runTest('Communication - Batch request handling', async () => {\n      const batchRequest = [\n        {\n          jsonrpc: '2.0',\n          method: 'tools/call',\n          params: { name: 'swarm_status', arguments: {} },\n          id: 4\n        },\n        {\n          jsonrpc: '2.0',\n          method: 'tools/call',\n          params: { name: 'agent_list', arguments: {} },\n          id: 5\n        }\n      ];\n      \n      // Simulate batch processing\n      const batchResponse = batchRequest.map(req => ({\n        jsonrpc: '2.0',\n        result: {\n          content: [\n            {\n              type: 'text',\n              text: `Response for ${req.params.name}`\n            }\n          ]\n        },\n        id: req.id\n      }));\n      \n      assert(Array.isArray(batchResponse), 'Should handle batch requests');\n      assert(batchResponse.length === batchRequest.length, 'Should return same number of responses');\n      \n      this.results.coverage.communication++;\n    });\n\n    await this.runTest('Communication - Notification handling', async () => {\n      const notification = {\n        jsonrpc: '2.0',\n        method: 'notifications/message',\n        params: {\n          level: 'info',\n          logger: 'ruv-swarm',\n          data: 'Agent spawned successfully'\n        }\n      };\n      \n      // Notifications don't have ID and don't expect responses\n      assert(notification.id === undefined, 'Notifications should not have ID');\n      assert(notification.method.startsWith('notifications/'), 'Should be notification method');\n      \n      this.results.coverage.communication++;\n    });\n  }\n\n  // Test MCP Serialization\n  async testMCPSerialization() {\n    console.log('\\n🔍 Testing MCP Serialization...');\n\n    await this.runTest('Serialization - JSON serialization/deserialization', async () => {\n      const originalMessage = {\n        jsonrpc: '2.0',\n        method: 'tools/call',\n        params: {\n          name: 'agent_spawn',\n          arguments: {\n            type: 'researcher',\n            capabilities: ['search', 'analyze', 'summarize'],\n            config: {\n              timeout: 30000,\n              retries: 3,\n              priority: 'high'\n            }\n          }\n        },\n        id: 6\n      };\n      \n      const serialized = JSON.stringify(originalMessage);\n      const deserialized = JSON.parse(serialized);\n      \n      assert(JSON.stringify(deserialized) === JSON.stringify(originalMessage), 'Should preserve message integrity');\n      assert(deserialized.params.arguments.capabilities.length === 3, 'Should preserve array data');\n      assert(deserialized.params.arguments.config.timeout === 30000, 'Should preserve nested objects');\n      \n      this.results.coverage.serialization++;\n    });\n\n    await this.runTest('Serialization - Binary data handling', async () => {\n      const binaryData = Buffer.from('Hello, World!', 'utf8');\n      const base64Data = binaryData.toString('base64');\n      \n      const messageWithBinary = {\n        jsonrpc: '2.0',\n        method: 'tools/call',\n        params: {\n          name: 'process_binary',\n          arguments: {\n            data: base64Data,\n            encoding: 'base64'\n          }\n        },\n        id: 7\n      };\n      \n      const serialized = JSON.stringify(messageWithBinary);\n      const deserialized = JSON.parse(serialized);\n      const recoveredBinary = Buffer.from(deserialized.params.arguments.data, 'base64');\n      \n      assert(recoveredBinary.toString('utf8') === 'Hello, World!', 'Should handle binary data correctly');\n      \n      this.results.coverage.serialization++;\n    });\n\n    await this.runTest('Serialization - Unicode and special characters', async () => {\n      const unicodeMessage = {\n        jsonrpc: '2.0',\n        method: 'tools/call',\n        params: {\n          name: 'process_text',\n          arguments: {\n            text: 'Hello 🌍! Café naïve résumé 中文 中文 🚀',\n            emoji: '🚀🌍💻🤖',\n            math: 'π ≠ 3.14159...',\n            quotes: '\"Smart quotes\" and ‘single quotes’'\n          }\n        },\n        id: 8\n      };\n      \n      const serialized = JSON.stringify(unicodeMessage);\n      const deserialized = JSON.parse(serialized);\n      \n      assert(deserialized.params.arguments.text.includes('🌍'), 'Should preserve emoji');\n      assert(deserialized.params.arguments.text.includes('中文'), 'Should preserve Chinese characters');\n      assert(deserialized.params.arguments.math.includes('π'), 'Should preserve mathematical symbols');\n      \n      this.results.coverage.serialization++;\n    });\n  }\n\n  // Test MCP Error Handling\n  async testMCPErrorHandling() {\n    console.log('\\n🔍 Testing MCP Error Handling...');\n\n    await this.runTest('Error Handling - Invalid JSON-RPC version', async () => {\n      const invalidRequest = {\n        jsonrpc: '1.0', // Invalid version\n        method: 'tools/call',\n        params: { name: 'test' },\n        id: 9\n      };\n      \n      const errorResponse = {\n        jsonrpc: '2.0',\n        error: {\n          code: -32600,\n          message: 'Invalid Request',\n          data: 'Unsupported JSON-RPC version'\n        },\n        id: 9\n      };\n      \n      assert(errorResponse.error.code === -32600, 'Should return Invalid Request error');\n      this.results.coverage.errorHandling++;\n    });\n\n    await this.runTest('Error Handling - Method not found', async () => {\n      const unknownMethodRequest = {\n        jsonrpc: '2.0',\n        method: 'unknown/method',\n        params: {},\n        id: 10\n      };\n      \n      const errorResponse = {\n        jsonrpc: '2.0',\n        error: {\n          code: -32601,\n          message: 'Method not found',\n          data: 'Method unknown/method not supported'\n        },\n        id: 10\n      };\n      \n      assert(errorResponse.error.code === -32601, 'Should return Method not found error');\n      this.results.coverage.errorHandling++;\n    });\n\n    await this.runTest('Error Handling - Invalid parameters', async () => {\n      const invalidParamsRequest = {\n        jsonrpc: '2.0',\n        method: 'tools/call',\n        params: {\n          name: 'swarm_init'\n          // Missing required arguments\n        },\n        id: 11\n      };\n      \n      const errorResponse = {\n        jsonrpc: '2.0',\n        error: {\n          code: -32602,\n          message: 'Invalid params',\n          data: 'Missing required parameter: topology'\n        },\n        id: 11\n      };\n      \n      assert(errorResponse.error.code === -32602, 'Should return Invalid params error');\n      this.results.coverage.errorHandling++;\n    });\n\n    await this.runTest('Error Handling - Parse error', async () => {\n      const malformedJSON = '{\"jsonrpc\":\"2.0\",\"method\":\"tools/call\",\"params\":{\"name\":\"test\"},';\n      \n      try {\n        JSON.parse(malformedJSON);\n        assert.fail('Should have thrown parse error');\n      } catch (error) {\n        const parseErrorResponse = {\n          jsonrpc: '2.0',\n          error: {\n            code: -32700,\n            message: 'Parse error',\n            data: 'Invalid JSON format'\n          },\n          id: null\n        };\n        \n        assert(parseErrorResponse.error.code === -32700, 'Should return Parse error');\n      }\n      \n      this.results.coverage.errorHandling++;\n    });\n  }\n\n  // Test MCP Performance\n  async testMCPPerformance() {\n    console.log('\\n🔍 Testing MCP Performance...');\n\n    await this.runTest('Performance - Large payload handling', async () => {\n      const largeArray = new Array(10000).fill(0).map((_, i) => `item-${i}`);\n      \n      const largeRequest = {\n        jsonrpc: '2.0',\n        method: 'tools/call',\n        params: {\n          name: 'process_large_data',\n          arguments: {\n            data: largeArray,\n            metadata: {\n              count: largeArray.length,\n              timestamp: Date.now()\n            }\n          }\n        },\n        id: 12\n      };\n      \n      const startTime = performance.now();\n      const serialized = JSON.stringify(largeRequest);\n      const deserialized = JSON.parse(serialized);\n      const endTime = performance.now();\n      \n      const processingTime = endTime - startTime;\n      \n      assert(deserialized.params.arguments.data.length === 10000, 'Should handle large arrays');\n      assert(processingTime < 1000, 'Should process large payloads efficiently'); // Less than 1 second\n      \n      this.results.coverage.performance++;\n    });\n\n    await this.runTest('Performance - Concurrent request simulation', async () => {\n      const createRequest = (id) => ({\n        jsonrpc: '2.0',\n        method: 'tools/call',\n        params: {\n          name: 'agent_metrics',\n          arguments: { metric: 'all' }\n        },\n        id: id\n      });\n      \n      const startTime = performance.now();\n      \n      // Simulate 100 concurrent requests\n      const requests = Array.from({ length: 100 }, (_, i) => createRequest(i + 13));\n      const responses = requests.map(req => ({\n        jsonrpc: '2.0',\n        result: {\n          content: [\n            {\n              type: 'text',\n              text: JSON.stringify({ metrics: { cpu: Math.random() * 100 } })\n            }\n          ]\n        },\n        id: req.id\n      }));\n      \n      const endTime = performance.now();\n      const processingTime = endTime - startTime;\n      \n      assert(responses.length === 100, 'Should handle concurrent requests');\n      assert(processingTime < 500, 'Should process concurrent requests efficiently');\n      \n      this.results.coverage.performance++;\n    });\n\n    await this.runTest('Performance - Memory usage monitoring', async () => {\n      const initialMemory = process.memoryUsage();\n      \n      // Create many large objects to test memory handling\n      const largeObjects = [];\n      for (let i = 0; i < 1000; i++) {\n        largeObjects.push({\n          jsonrpc: '2.0',\n          method: 'tools/call',\n          params: {\n            name: `test_method_${i}`,\n            arguments: {\n              data: new Array(100).fill(`test-data-${i}`),\n              timestamp: Date.now()\n            }\n          },\n          id: i + 113\n        });\n      }\n      \n      const peakMemory = process.memoryUsage();\n      \n      // Clear objects\n      largeObjects.length = 0;\n      \n      // Force garbage collection if available\n      if (global.gc) {\n        global.gc();\n      }\n      \n      const finalMemory = process.memoryUsage();\n      \n      const memoryIncrease = peakMemory.heapUsed - initialMemory.heapUsed;\n      const memoryRecovered = peakMemory.heapUsed - finalMemory.heapUsed;\n      \n      assert(memoryIncrease > 0, 'Should show memory usage increase');\n      // Memory recovery depends on GC, so we don't assert it\n      \n      this.results.coverage.performance++;\n    });\n  }\n\n  // Test MCP Security\n  async testMCPSecurity() {\n    console.log('\\n🔍 Testing MCP Security...');\n\n    await this.runTest('Security - Input sanitization', async () => {\n      const maliciousRequest = {\n        jsonrpc: '2.0',\n        method: 'tools/call',\n        params: {\n          name: 'swarm_init',\n          arguments: {\n            topology: '<script>alert(\"XSS\")</script>',\n            config: {\n              command: 'rm -rf /',\n              sql: \"'; DROP TABLE users; --\"\n            }\n          }\n        },\n        id: 116\n      };\n      \n      // Simulate input sanitization\n      const sanitizedArgs = {\n        topology: maliciousRequest.params.arguments.topology.replace(/<script[^>]*>.*?<\\/script>/gi, ''),\n        config: {\n          command: maliciousRequest.params.arguments.config.command.replace(/[;&|`$()]/g, ''),\n          sql: maliciousRequest.params.arguments.config.sql.replace(/['\";<>]/g, '')\n        }\n      };\n      \n      assert(!sanitizedArgs.topology.includes('<script>'), 'Should sanitize XSS attempts');\n      assert(!sanitizedArgs.config.command.includes('rm -rf'), 'Should sanitize command injection');\n      assert(!sanitizedArgs.config.sql.includes('DROP TABLE'), 'Should sanitize SQL injection');\n      \n      this.results.coverage.security++;\n    });\n\n    await this.runTest('Security - Request size limits', async () => {\n      const oversizedData = 'x'.repeat(10 * 1024 * 1024); // 10MB string\n      \n      const oversizedRequest = {\n        jsonrpc: '2.0',\n        method: 'tools/call',\n        params: {\n          name: 'process_data',\n          arguments: {\n            data: oversizedData\n          }\n        },\n        id: 117\n      };\n      \n      const requestSize = JSON.stringify(oversizedRequest).length;\n      const maxSize = 5 * 1024 * 1024; // 5MB limit\n      \n      if (requestSize > maxSize) {\n        const errorResponse = {\n          jsonrpc: '2.0',\n          error: {\n            code: -32000,\n            message: 'Request too large',\n            data: `Request size ${requestSize} exceeds limit ${maxSize}`\n          },\n          id: 117\n        };\n        \n        assert(errorResponse.error.code === -32000, 'Should reject oversized requests');\n      }\n      \n      this.results.coverage.security++;\n    });\n\n    await this.runTest('Security - Method whitelisting', async () => {\n      const allowedMethods = [\n        'tools/call',\n        'tools/list',\n        'notifications/message',\n        'resources/list',\n        'resources/read'\n      ];\n      \n      const unauthorizedRequest = {\n        jsonrpc: '2.0',\n        method: 'system/shutdown',\n        params: {},\n        id: 118\n      };\n      \n      const isAllowed = allowedMethods.includes(unauthorizedRequest.method);\n      \n      if (!isAllowed) {\n        const errorResponse = {\n          jsonrpc: '2.0',\n          error: {\n            code: -32601,\n            message: 'Method not found',\n            data: 'Method not in whitelist'\n          },\n          id: 118\n        };\n        \n        assert(errorResponse.error.code === -32601, 'Should reject non-whitelisted methods');\n      }\n      \n      this.results.coverage.security++;\n    });\n  }\n\n  // Test MCP Compatibility\n  async testMCPCompatibility() {\n    console.log('\\n🔍 Testing MCP Compatibility...');\n\n    await this.runTest('Compatibility - Different JSON-RPC clients', async () => {\n      // Test compatibility with various client formats\n      const clientFormats = [\n        {\n          name: 'Standard client',\n          request: {\n            jsonrpc: '2.0',\n            method: 'tools/call',\n            params: { name: 'test', arguments: {} },\n            id: 119\n          }\n        },\n        {\n          name: 'Client with extra fields',\n          request: {\n            jsonrpc: '2.0',\n            method: 'tools/call',\n            params: { name: 'test', arguments: {} },\n            id: 120,\n            timestamp: Date.now(),\n            client: 'test-client'\n          }\n        },\n        {\n          name: 'Client with string ID',\n          request: {\n            jsonrpc: '2.0',\n            method: 'tools/call',\n            params: { name: 'test', arguments: {} },\n            id: 'string-id-121'\n          }\n        }\n      ];\n      \n      for (const format of clientFormats) {\n        const response = {\n          jsonrpc: '2.0',\n          result: {\n            content: [\n              {\n                type: 'text',\n                text: 'Test response'\n              }\n            ]\n          },\n          id: format.request.id\n        };\n        \n        assert(response.id === format.request.id, `Should handle ${format.name}`);\n      }\n      \n      this.results.coverage.compatibility++;\n    });\n\n    await this.runTest('Compatibility - Content type variations', async () => {\n      const contentTypes = [\n        {\n          type: 'text',\n          text: 'Plain text response'\n        },\n        {\n          type: 'text',\n          text: JSON.stringify({ structured: 'data' })\n        },\n        {\n          type: 'image',\n          data: 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mP8/5+hHgAHggJ/PchI7wAAAABJRU5ErkJggg==',\n          mimeType: 'image/png'\n        },\n        {\n          type: 'resource',\n          resource: {\n            uri: 'file:///test.txt',\n            mimeType: 'text/plain'\n          }\n        }\n      ];\n      \n      for (const content of contentTypes) {\n        const response = {\n          jsonrpc: '2.0',\n          result: {\n            content: [content]\n          },\n          id: 122\n        };\n        \n        assert(response.result.content[0].type === content.type, `Should handle ${content.type} content`);\n      }\n      \n      this.results.coverage.compatibility++;\n    });\n  }\n\n  generateReport() {\n    const passRate = (this.results.passed / this.results.totalTests * 100).toFixed(1);\n    const totalCoverage = Object.values(this.results.coverage).reduce((a, b) => a + b, 0);\n    \n    const report = {\n      timestamp: new Date().toISOString(),\n      summary: {\n        totalTests: this.results.totalTests,\n        passed: this.results.passed,\n        failed: this.results.failed,\n        passRate: `${passRate}%`,\n        totalCoveragePoints: totalCoverage\n      },\n      coverage: this.results.coverage,\n      errors: this.results.errors,\n      recommendations: this.generateRecommendations()\n    };\n\n    return report;\n  }\n\n  generateRecommendations() {\n    const recommendations = [];\n    const coverage = this.results.coverage;\n\n    if (this.results.failed > 0) {\n      recommendations.push('Fix failing MCP protocol tests to ensure compliance');\n    }\n\n    if (coverage.protocol < 4) {\n      recommendations.push('Add more MCP protocol conformance tests');\n    }\n\n    if (coverage.communication < 3) {\n      recommendations.push('Expand MCP communication pattern tests');\n    }\n\n    if (coverage.serialization < 3) {\n      recommendations.push('Add more serialization and encoding tests');\n    }\n\n    if (coverage.errorHandling < 4) {\n      recommendations.push('Enhance MCP error handling test coverage');\n    }\n\n    if (coverage.performance < 3) {\n      recommendations.push('Add more MCP performance benchmarks');\n    }\n\n    if (coverage.security < 3) {\n      recommendations.push('Strengthen MCP security testing');\n    }\n\n    if (coverage.compatibility < 2) {\n      recommendations.push('Add more client compatibility tests');\n    }\n\n    if (recommendations.length === 0) {\n      recommendations.push('Excellent MCP protocol coverage! Consider adding stress tests.');\n    }\n\n    return recommendations;\n  }\n\n  async run() {\n    console.log('🔗 Starting Comprehensive MCP Protocol Integration Test Suite');\n    console.log('=' .repeat(75));\n\n    await this.testMCPProtocolBasics();\n    await this.testMCPCommunication();\n    await this.testMCPSerialization();\n    await this.testMCPErrorHandling();\n    await this.testMCPPerformance();\n    await this.testMCPSecurity();\n    await this.testMCPCompatibility();\n\n    const report = this.generateReport();\n    \n    console.log('\\n📊 MCP Protocol Test Results Summary');\n    console.log('=' .repeat(75));\n    console.log(`Total Tests: ${report.summary.totalTests}`);\n    console.log(`Passed: ${report.summary.passed}`);\n    console.log(`Failed: ${report.summary.failed}`);\n    console.log(`Pass Rate: ${report.summary.passRate}`);\n    console.log(`Total Coverage Points: ${report.summary.totalCoveragePoints}`);\n    \n    console.log('\\n📊 Coverage Breakdown:');\n    Object.entries(report.coverage).forEach(([area, count]) => {\n      console.log(`  ${area}: ${count} tests`);\n    });\n    \n    if (report.errors.length > 0) {\n      console.log('\\n❌ Errors:');\n      report.errors.forEach(error => {\n        console.log(`  - ${error.name}: ${error.error}`);\n      });\n    }\n\n    console.log('\\n💡 Recommendations:');\n    report.recommendations.forEach(rec => {\n      console.log(`  - ${rec}`);\n    });\n\n    // Save report to file\n    const reportPath = path.join(__dirname, '../test-reports/mcp-protocol-test-report.json');\n    fs.mkdirSync(path.dirname(reportPath), { recursive: true });\n    fs.writeFileSync(reportPath, JSON.stringify(report, null, 2));\n    \n    console.log(`\\n📄 Report saved to: ${reportPath}`);\n    console.log('\\n✅ MCP Protocol Integration Test Suite Complete!');\n    \n    return report;\n  }\n}\n\n// Run the test suite if this file is executed directly\nif (import.meta.url === `file://${process.argv[1]}`) {\n  const testSuite = new MCPProtocolIntegrationTestSuite();\n  try {\n    await testSuite.run();\n    process.exit(0);\n  } catch (error) {\n    console.error('❌ MCP protocol test suite failed:', error);\n    process.exit(1);\n  }\n}\n\nexport { MCPProtocolIntegrationTestSuite };\nexport default MCPProtocolIntegrationTestSuite;\n"],"mappings":"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","ignoreList":[]}