7c605edb80839c0b4de9f7dfa55316b3
function ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }
function _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }
function _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == typeof i ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != typeof t || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != typeof i) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }
function _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, "next", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, "throw", n); } _next(void 0); }); }; }
/**
 * Hooks System Coverage Tests
 * Tests all hook implementations for 100% coverage
 */

import assert from 'assert';
import { HooksManager } from '../src/hooks/index.js';
import { CLIHooks } from '../src/hooks/cli.js';
import { ClaudeIntegration, AdvancedCommands, RemoteIntegration } from '../src/claude-integration/index.js';
import { GitHubCoordinator, ClaudeHooks } from '../src/github-coordinator/index.js';
describe('Hooks System 100% Coverage', () => {
  let hooks;
  beforeEach(() => {
    hooks = new HooksManager();
  });
  describe('HooksManager Core', () => {
    it('should handle hook registration edge cases', () => {
      // Null hook
      assert.throws(() => hooks.register(null, () => {}), /Invalid hook name/);

      // Non-function handler
      assert.throws(() => hooks.register('test-hook', 'not-a-function'), /Handler must be a function/);

      // Duplicate registration
      hooks.register('duplicate', () => {});
      assert.throws(() => hooks.register('duplicate', () => {}), /Hook already registered/);
    });
    it('should handle hook execution failures', /*#__PURE__*/_asyncToGenerator(function* () {
      hooks.register('failing-hook', /*#__PURE__*/_asyncToGenerator(function* () {
        throw new Error('Hook failed');
      }));
      yield assert.rejects(hooks.execute('failing-hook', {
        data: 'test'
      }), /Hook failed/);
    }));
    it('should handle hook timeout', /*#__PURE__*/_asyncToGenerator(function* () {
      hooks.register('slow-hook', /*#__PURE__*/_asyncToGenerator(function* () {
        yield new Promise(resolve => setTimeout(resolve, 5000));
      }));
      hooks.setTimeout(100);
      yield assert.rejects(hooks.execute('slow-hook', {}), /Hook timeout/);
    }));
    it('should handle hook context validation', /*#__PURE__*/_asyncToGenerator(function* () {
      hooks.register('validated-hook', /*#__PURE__*/function () {
        var _ref6 = _asyncToGenerator(function* (context) {
          if (!context.required) {
            throw new Error('Missing required field');
          }
          return context.required;
        });
        return function (_x) {
          return _ref6.apply(this, arguments);
        };
      }());
      yield assert.rejects(hooks.execute('validated-hook', {
        optional: 'value'
      }), /Missing required field/);
    }));
    it('should handle hook chain execution', /*#__PURE__*/_asyncToGenerator(function* () {
      const results = [];
      hooks.register('chain-1', /*#__PURE__*/_asyncToGenerator(function* () {
        results.push(1);
        return {
          step: 1
        };
      }));
      hooks.register('chain-2', /*#__PURE__*/function () {
        var _ref9 = _asyncToGenerator(function* (context) {
          results.push(2);
          return _objectSpread(_objectSpread({}, context), {}, {
            step: 2
          });
        });
        return function (_x2) {
          return _ref9.apply(this, arguments);
        };
      }());
      yield hooks.executeChain(['chain-1', 'chain-2'], {});
      assert.deepEqual(results, [1, 2]);
    }));
    it('should handle hook middleware errors', /*#__PURE__*/_asyncToGenerator(function* () {
      hooks.addMiddleware(/*#__PURE__*/function () {
        var _ref1 = _asyncToGenerator(function* (hookName, context, next) {
          if (hookName === 'restricted') {
            throw new Error('Access denied');
          }
          return next();
        });
        return function (_x3, _x4, _x5) {
          return _ref1.apply(this, arguments);
        };
      }());
      hooks.register('restricted', /*#__PURE__*/_asyncToGenerator(function* () {
        return {
          success: true
        };
      }));
      yield assert.rejects(hooks.execute('restricted', {}), /Access denied/);
    }));
  });
  describe('CLI Hooks', () => {
    let cliHooks;
    beforeEach(() => {
      cliHooks = new CLIHooks();
    });
    it('should handle invalid command parsing', () => {
      assert.throws(() => cliHooks.parseCommand(null), /Invalid command/);
      assert.throws(() => cliHooks.parseCommand(''), /Empty command/);
    });
    it('should handle command execution with missing arguments', /*#__PURE__*/_asyncToGenerator(function* () {
      yield assert.rejects(cliHooks.execute('swarm', []),
      // Missing required args
      /Missing required arguments/);
    }));
    it('should handle command validation failures', /*#__PURE__*/_asyncToGenerator(function* () {
      yield assert.rejects(cliHooks.execute('swarm', ['init', '--invalid-flag']), /Unknown flag/);
    }));
    it('should handle interactive mode edge cases', /*#__PURE__*/_asyncToGenerator(function* () {
      cliHooks.setInteractive(true);

      // Simulate no TTY
      const originalIsTTY = process.stdin.isTTY;
      process.stdin.isTTY = false;
      yield assert.rejects(cliHooks.prompt('Enter value:'), /Not in interactive terminal/);
      process.stdin.isTTY = originalIsTTY;
    }));
  });
  describe('Claude Integration', () => {
    let claude;
    beforeEach(() => {
      claude = new ClaudeIntegration();
    });
    it('should handle API key validation', /*#__PURE__*/_asyncToGenerator(function* () {
      claude.setApiKey(''); // Empty API key

      yield assert.rejects(claude.complete({
        prompt: 'test'
      }), /Invalid API key/);
    }));
    it('should handle rate limiting', /*#__PURE__*/_asyncToGenerator(function* () {
      claude.setRateLimit(1); // 1 request per second

      const promises = [];
      for (let i = 0; i < 5; i++) {
        promises.push(claude.complete({
          prompt: `test ${i}`
        }));
      }
      const results = yield Promise.allSettled(promises);
      const rejected = results.filter(r => r.status === 'rejected');
      assert(rejected.length > 0, 'Some requests should be rate limited');
    }));
    it('should handle response parsing errors', /*#__PURE__*/_asyncToGenerator(function* () {
      claude._mockResponse = 'invalid-json';
      yield assert.rejects(claude.complete({
        prompt: 'test'
      }), /Failed to parse response/);
    }));
    it('should handle context window overflow', /*#__PURE__*/_asyncToGenerator(function* () {
      const hugePrompt = 'x'.repeat(200000); // Exceeds context window

      yield assert.rejects(claude.complete({
        prompt: hugePrompt
      }), /Context window exceeded/);
    }));
  });
  describe('Advanced Commands', () => {
    let commands;
    beforeEach(() => {
      commands = new AdvancedCommands();
    });
    it('should handle command registration conflicts', () => {
      commands.register('test', () => {});
      assert.throws(() => commands.register('test', () => {}), /Command already exists/);
    });
    it('should handle command alias conflicts', () => {
      commands.register('test', () => {}, {
        aliases: ['t']
      });
      assert.throws(() => commands.register('test2', () => {}, {
        aliases: ['t']
      }), /Alias already in use/);
    });
    it('should handle command permission errors', /*#__PURE__*/_asyncToGenerator(function* () {
      commands.register('admin', () => {}, {
        requiresAdmin: true
      });
      yield assert.rejects(commands.execute('admin', {}, {
        isAdmin: false
      }), /Insufficient permissions/);
    }));
    it('should handle command validation schemas', /*#__PURE__*/_asyncToGenerator(function* () {
      commands.register('validated', args => args, {
        schema: {
          name: {
            type: 'string',
            required: true
          },
          age: {
            type: 'number',
            min: 0
          }
        }
      });
      yield assert.rejects(commands.execute('validated', {
        age: -5
      }), /Validation failed/);
    }));
  });
  describe('Remote Integration', () => {
    let remote;
    beforeEach(() => {
      remote = new RemoteIntegration();
    });
    it('should handle connection failures', /*#__PURE__*/_asyncToGenerator(function* () {
      yield assert.rejects(remote.connect('invalid://url'), /Failed to connect/);
    }));
    it('should handle authentication failures', /*#__PURE__*/_asyncToGenerator(function* () {
      remote.setCredentials({
        token: 'invalid'
      });
      yield assert.rejects(remote.authenticate(), /Authentication failed/);
    }));
    it('should handle message serialization errors', /*#__PURE__*/_asyncToGenerator(function* () {
      yield remote.connect('ws://localhost:3000');
      const circularRef = {};
      circularRef.self = circularRef;
      yield assert.rejects(remote.send(circularRef), /Failed to serialize message/);
    }));
    it('should handle reconnection logic', /*#__PURE__*/_asyncToGenerator(function* () {
      remote.setAutoReconnect(true, {
        maxRetries: 3
      });
      let attempts = 0;
      remote.onReconnectAttempt = () => attempts++;
      yield remote.connect('ws://invalid-host');

      // Wait for reconnection attempts
      yield new Promise(resolve => setTimeout(resolve, 1000));
      assert(attempts >= 1, 'Should attempt reconnection');
    }));
  });
  describe('GitHub Coordinator', () => {
    let coordinator;
    beforeEach(() => {
      coordinator = new GitHubCoordinator();
    });
    it('should handle PR creation failures', /*#__PURE__*/_asyncToGenerator(function* () {
      yield assert.rejects(coordinator.createPR({
        title: '',
        // Empty title
        body: 'Test PR'
      }), /PR title required/);
    }));
    it('should handle branch protection violations', /*#__PURE__*/_asyncToGenerator(function* () {
      yield assert.rejects(coordinator.push({
        branch: 'main',
        files: [{
          path: 'test.js',
          content: 'test'
        }],
        force: true
      }), /Branch protection/);
    }));
    it('should handle merge conflict detection', /*#__PURE__*/_asyncToGenerator(function* () {
      const result = yield coordinator.checkMergeability({
        base: 'main',
        head: 'feature-branch'
      });
      if (!result.mergeable) {
        assert(result.conflicts.length > 0, 'Should detect conflicts');
      }
    }));
    it('should handle webhook signature validation', () => {
      const payload = {
        event: 'push'
      };
      const invalidSignature = 'invalid';
      assert.throws(() => coordinator.validateWebhook(payload, invalidSignature), /Invalid webhook signature/);
    });
  });
  describe('Claude Hooks Integration', () => {
    let claudeHooks;
    beforeEach(() => {
      claudeHooks = new ClaudeHooks();
    });
    it('should handle pre-task hook failures', /*#__PURE__*/_asyncToGenerator(function* () {
      claudeHooks.register('pre-task', /*#__PURE__*/function () {
        var _ref28 = _asyncToGenerator(function* (context) {
          if (!context.taskId) {
            throw new Error('Task ID required');
          }
        });
        return function (_x6) {
          return _ref28.apply(this, arguments);
        };
      }());
      yield assert.rejects(claudeHooks.runPreTask({}), /Task ID required/);
    }));
    it('should handle post-edit hook validation', /*#__PURE__*/_asyncToGenerator(function* () {
      claudeHooks.register('post-edit', /*#__PURE__*/function () {
        var _ref30 = _asyncToGenerator(function* (context) {
          if (context.file.endsWith('.py') && !context.formatted) {
            throw new Error('Python files must be formatted');
          }
        });
        return function (_x7) {
          return _ref30.apply(this, arguments);
        };
      }());
      yield assert.rejects(claudeHooks.runPostEdit({
        file: 'test.py',
        formatted: false
      }), /Python files must be formatted/);
    }));
    it('should handle session persistence errors', /*#__PURE__*/_asyncToGenerator(function* () {
      claudeHooks._storage = null; // Simulate storage failure

      yield assert.rejects(claudeHooks.saveSession({
        id: 'test',
        data: {}
      }), /Failed to save session/);
    }));
    it('should handle hook execution order', /*#__PURE__*/_asyncToGenerator(function* () {
      const order = [];
      claudeHooks.register('ordered', /*#__PURE__*/_asyncToGenerator(function* () {
        return order.push(1);
      }), {
        priority: 10
      });
      claudeHooks.register('ordered', /*#__PURE__*/_asyncToGenerator(function* () {
        return order.push(2);
      }), {
        priority: 5
      });
      claudeHooks.register('ordered', /*#__PURE__*/_asyncToGenerator(function* () {
        return order.push(3);
      }), {
        priority: 15
      });
      yield claudeHooks.execute('ordered', {});
      assert.deepEqual(order, [2, 1, 3], 'Hooks should execute by priority');
    }));
  });
});

// Run tests when executed directly
if (import.meta.url === `file://${process.argv[1]}`) {
  console.log('Running hooks coverage tests...');

  // Run all tests
  const {
    run
  } = await import('./test-runner.js');
  await run(__filename);
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJhc3NlcnQiLCJIb29rc01hbmFnZXIiLCJDTElIb29rcyIsIkNsYXVkZUludGVncmF0aW9uIiwiQWR2YW5jZWRDb21tYW5kcyIsIlJlbW90ZUludGVncmF0aW9uIiwiR2l0SHViQ29vcmRpbmF0b3IiLCJDbGF1ZGVIb29rcyIsImRlc2NyaWJlIiwiaG9va3MiLCJiZWZvcmVFYWNoIiwiaXQiLCJ0aHJvd3MiLCJyZWdpc3RlciIsIl9hc3luY1RvR2VuZXJhdG9yIiwiRXJyb3IiLCJyZWplY3RzIiwiZXhlY3V0ZSIsImRhdGEiLCJQcm9taXNlIiwicmVzb2x2ZSIsInNldFRpbWVvdXQiLCJfcmVmNiIsImNvbnRleHQiLCJyZXF1aXJlZCIsIl94IiwiYXBwbHkiLCJhcmd1bWVudHMiLCJvcHRpb25hbCIsInJlc3VsdHMiLCJwdXNoIiwic3RlcCIsIl9yZWY5IiwiX29iamVjdFNwcmVhZCIsIl94MiIsImV4ZWN1dGVDaGFpbiIsImRlZXBFcXVhbCIsImFkZE1pZGRsZXdhcmUiLCJfcmVmMSIsImhvb2tOYW1lIiwibmV4dCIsIl94MyIsIl94NCIsIl94NSIsInN1Y2Nlc3MiLCJjbGlIb29rcyIsInBhcnNlQ29tbWFuZCIsInNldEludGVyYWN0aXZlIiwib3JpZ2luYWxJc1RUWSIsInByb2Nlc3MiLCJzdGRpbiIsImlzVFRZIiwicHJvbXB0IiwiY2xhdWRlIiwic2V0QXBpS2V5IiwiY29tcGxldGUiLCJzZXRSYXRlTGltaXQiLCJwcm9taXNlcyIsImkiLCJhbGxTZXR0bGVkIiwicmVqZWN0ZWQiLCJmaWx0ZXIiLCJyIiwic3RhdHVzIiwibGVuZ3RoIiwiX21vY2tSZXNwb25zZSIsImh1Z2VQcm9tcHQiLCJyZXBlYXQiLCJjb21tYW5kcyIsImFsaWFzZXMiLCJyZXF1aXJlc0FkbWluIiwiaXNBZG1pbiIsImFyZ3MiLCJzY2hlbWEiLCJuYW1lIiwidHlwZSIsImFnZSIsIm1pbiIsInJlbW90ZSIsImNvbm5lY3QiLCJzZXRDcmVkZW50aWFscyIsInRva2VuIiwiYXV0aGVudGljYXRlIiwiY2lyY3VsYXJSZWYiLCJzZWxmIiwic2VuZCIsInNldEF1dG9SZWNvbm5lY3QiLCJtYXhSZXRyaWVzIiwiYXR0ZW1wdHMiLCJvblJlY29ubmVjdEF0dGVtcHQiLCJjb29yZGluYXRvciIsImNyZWF0ZVBSIiwidGl0bGUiLCJib2R5IiwiYnJhbmNoIiwiZmlsZXMiLCJwYXRoIiwiY29udGVudCIsImZvcmNlIiwicmVzdWx0IiwiY2hlY2tNZXJnZWFiaWxpdHkiLCJiYXNlIiwiaGVhZCIsIm1lcmdlYWJsZSIsImNvbmZsaWN0cyIsInBheWxvYWQiLCJldmVudCIsImludmFsaWRTaWduYXR1cmUiLCJ2YWxpZGF0ZVdlYmhvb2siLCJjbGF1ZGVIb29rcyIsIl9yZWYyOCIsInRhc2tJZCIsIl94NiIsInJ1blByZVRhc2siLCJfcmVmMzAiLCJmaWxlIiwiZW5kc1dpdGgiLCJmb3JtYXR0ZWQiLCJfeDciLCJydW5Qb3N0RWRpdCIsIl9zdG9yYWdlIiwic2F2ZVNlc3Npb24iLCJpZCIsIm9yZGVyIiwicHJpb3JpdHkiLCJpbXBvcnQiLCJtZXRhIiwidXJsIiwiYXJndiIsImNvbnNvbGUiLCJsb2ciLCJydW4iLCJfX2ZpbGVuYW1lIl0sInNvdXJjZXMiOlsiaG9va3MtY292ZXJhZ2UudGVzdC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEhvb2tzIFN5c3RlbSBDb3ZlcmFnZSBUZXN0c1xuICogVGVzdHMgYWxsIGhvb2sgaW1wbGVtZW50YXRpb25zIGZvciAxMDAlIGNvdmVyYWdlXG4gKi9cblxuaW1wb3J0IGFzc2VydCBmcm9tICdhc3NlcnQnO1xuaW1wb3J0IHsgSG9va3NNYW5hZ2VyIH0gZnJvbSAnLi4vc3JjL2hvb2tzL2luZGV4LmpzJztcbmltcG9ydCB7IENMSUhvb2tzIH0gZnJvbSAnLi4vc3JjL2hvb2tzL2NsaS5qcyc7XG5pbXBvcnQgeyBcbiAgQ2xhdWRlSW50ZWdyYXRpb24sXG4gIEFkdmFuY2VkQ29tbWFuZHMsXG4gIFJlbW90ZUludGVncmF0aW9uIFxufSBmcm9tICcuLi9zcmMvY2xhdWRlLWludGVncmF0aW9uL2luZGV4LmpzJztcbmltcG9ydCB7XG4gIEdpdEh1YkNvb3JkaW5hdG9yLFxuICBDbGF1ZGVIb29rc1xufSBmcm9tICcuLi9zcmMvZ2l0aHViLWNvb3JkaW5hdG9yL2luZGV4LmpzJztcblxuZGVzY3JpYmUoJ0hvb2tzIFN5c3RlbSAxMDAlIENvdmVyYWdlJywgKCkgPT4ge1xuICBsZXQgaG9va3M7XG5cbiAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgaG9va3MgPSBuZXcgSG9va3NNYW5hZ2VyKCk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdIb29rc01hbmFnZXIgQ29yZScsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBob29rIHJlZ2lzdHJhdGlvbiBlZGdlIGNhc2VzJywgKCkgPT4ge1xuICAgICAgLy8gTnVsbCBob29rXG4gICAgICBhc3NlcnQudGhyb3dzKFxuICAgICAgICAoKSA9PiBob29rcy5yZWdpc3RlcihudWxsLCAoKSA9PiB7fSksXG4gICAgICAgIC9JbnZhbGlkIGhvb2sgbmFtZS9cbiAgICAgICk7XG5cbiAgICAgIC8vIE5vbi1mdW5jdGlvbiBoYW5kbGVyXG4gICAgICBhc3NlcnQudGhyb3dzKFxuICAgICAgICAoKSA9PiBob29rcy5yZWdpc3RlcigndGVzdC1ob29rJywgJ25vdC1hLWZ1bmN0aW9uJyksXG4gICAgICAgIC9IYW5kbGVyIG11c3QgYmUgYSBmdW5jdGlvbi9cbiAgICAgICk7XG5cbiAgICAgIC8vIER1cGxpY2F0ZSByZWdpc3RyYXRpb25cbiAgICAgIGhvb2tzLnJlZ2lzdGVyKCdkdXBsaWNhdGUnLCAoKSA9PiB7fSk7XG4gICAgICBhc3NlcnQudGhyb3dzKFxuICAgICAgICAoKSA9PiBob29rcy5yZWdpc3RlcignZHVwbGljYXRlJywgKCkgPT4ge30pLFxuICAgICAgICAvSG9vayBhbHJlYWR5IHJlZ2lzdGVyZWQvXG4gICAgICApO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgaG9vayBleGVjdXRpb24gZmFpbHVyZXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBob29rcy5yZWdpc3RlcignZmFpbGluZy1ob29rJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0hvb2sgZmFpbGVkJyk7XG4gICAgICB9KTtcblxuICAgICAgYXdhaXQgYXNzZXJ0LnJlamVjdHMoXG4gICAgICAgIGhvb2tzLmV4ZWN1dGUoJ2ZhaWxpbmctaG9vaycsIHsgZGF0YTogJ3Rlc3QnIH0pLFxuICAgICAgICAvSG9vayBmYWlsZWQvXG4gICAgICApO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgaG9vayB0aW1lb3V0JywgYXN5bmMgKCkgPT4ge1xuICAgICAgaG9va3MucmVnaXN0ZXIoJ3Nsb3ctaG9vaycsIGFzeW5jICgpID0+IHtcbiAgICAgICAgYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIDUwMDApKTtcbiAgICAgIH0pO1xuXG4gICAgICBob29rcy5zZXRUaW1lb3V0KDEwMCk7XG5cbiAgICAgIGF3YWl0IGFzc2VydC5yZWplY3RzKFxuICAgICAgICBob29rcy5leGVjdXRlKCdzbG93LWhvb2snLCB7fSksXG4gICAgICAgIC9Ib29rIHRpbWVvdXQvXG4gICAgICApO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgaG9vayBjb250ZXh0IHZhbGlkYXRpb24nLCBhc3luYyAoKSA9PiB7XG4gICAgICBob29rcy5yZWdpc3RlcigndmFsaWRhdGVkLWhvb2snLCBhc3luYyAoY29udGV4dCkgPT4ge1xuICAgICAgICBpZiAoIWNvbnRleHQucmVxdWlyZWQpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgZmllbGQnKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY29udGV4dC5yZXF1aXJlZDtcbiAgICAgIH0pO1xuXG4gICAgICBhd2FpdCBhc3NlcnQucmVqZWN0cyhcbiAgICAgICAgaG9va3MuZXhlY3V0ZSgndmFsaWRhdGVkLWhvb2snLCB7IG9wdGlvbmFsOiAndmFsdWUnIH0pLFxuICAgICAgICAvTWlzc2luZyByZXF1aXJlZCBmaWVsZC9cbiAgICAgICk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBob29rIGNoYWluIGV4ZWN1dGlvbicsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHJlc3VsdHMgPSBbXTtcbiAgICAgIFxuICAgICAgaG9va3MucmVnaXN0ZXIoJ2NoYWluLTEnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgIHJlc3VsdHMucHVzaCgxKTtcbiAgICAgICAgcmV0dXJuIHsgc3RlcDogMSB9O1xuICAgICAgfSk7XG5cbiAgICAgIGhvb2tzLnJlZ2lzdGVyKCdjaGFpbi0yJywgYXN5bmMgKGNvbnRleHQpID0+IHtcbiAgICAgICAgcmVzdWx0cy5wdXNoKDIpO1xuICAgICAgICByZXR1cm4geyAuLi5jb250ZXh0LCBzdGVwOiAyIH07XG4gICAgICB9KTtcblxuICAgICAgYXdhaXQgaG9va3MuZXhlY3V0ZUNoYWluKFsnY2hhaW4tMScsICdjaGFpbi0yJ10sIHt9KTtcbiAgICAgIGFzc2VydC5kZWVwRXF1YWwocmVzdWx0cywgWzEsIDJdKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIGhvb2sgbWlkZGxld2FyZSBlcnJvcnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBob29rcy5hZGRNaWRkbGV3YXJlKGFzeW5jIChob29rTmFtZSwgY29udGV4dCwgbmV4dCkgPT4ge1xuICAgICAgICBpZiAoaG9va05hbWUgPT09ICdyZXN0cmljdGVkJykge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcignQWNjZXNzIGRlbmllZCcpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXh0KCk7XG4gICAgICB9KTtcblxuICAgICAgaG9va3MucmVnaXN0ZXIoJ3Jlc3RyaWN0ZWQnLCBhc3luYyAoKSA9PiAoeyBzdWNjZXNzOiB0cnVlIH0pKTtcblxuICAgICAgYXdhaXQgYXNzZXJ0LnJlamVjdHMoXG4gICAgICAgIGhvb2tzLmV4ZWN1dGUoJ3Jlc3RyaWN0ZWQnLCB7fSksXG4gICAgICAgIC9BY2Nlc3MgZGVuaWVkL1xuICAgICAgKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0NMSSBIb29rcycsICgpID0+IHtcbiAgICBsZXQgY2xpSG9va3M7XG5cbiAgICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICAgIGNsaUhvb2tzID0gbmV3IENMSUhvb2tzKCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBpbnZhbGlkIGNvbW1hbmQgcGFyc2luZycsICgpID0+IHtcbiAgICAgIGFzc2VydC50aHJvd3MoXG4gICAgICAgICgpID0+IGNsaUhvb2tzLnBhcnNlQ29tbWFuZChudWxsKSxcbiAgICAgICAgL0ludmFsaWQgY29tbWFuZC9cbiAgICAgICk7XG5cbiAgICAgIGFzc2VydC50aHJvd3MoXG4gICAgICAgICgpID0+IGNsaUhvb2tzLnBhcnNlQ29tbWFuZCgnJyksXG4gICAgICAgIC9FbXB0eSBjb21tYW5kL1xuICAgICAgKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIGNvbW1hbmQgZXhlY3V0aW9uIHdpdGggbWlzc2luZyBhcmd1bWVudHMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBhd2FpdCBhc3NlcnQucmVqZWN0cyhcbiAgICAgICAgY2xpSG9va3MuZXhlY3V0ZSgnc3dhcm0nLCBbXSksIC8vIE1pc3NpbmcgcmVxdWlyZWQgYXJnc1xuICAgICAgICAvTWlzc2luZyByZXF1aXJlZCBhcmd1bWVudHMvXG4gICAgICApO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgY29tbWFuZCB2YWxpZGF0aW9uIGZhaWx1cmVzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgYXdhaXQgYXNzZXJ0LnJlamVjdHMoXG4gICAgICAgIGNsaUhvb2tzLmV4ZWN1dGUoJ3N3YXJtJywgWydpbml0JywgJy0taW52YWxpZC1mbGFnJ10pLFxuICAgICAgICAvVW5rbm93biBmbGFnL1xuICAgICAgKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIGludGVyYWN0aXZlIG1vZGUgZWRnZSBjYXNlcycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNsaUhvb2tzLnNldEludGVyYWN0aXZlKHRydWUpO1xuICAgICAgXG4gICAgICAvLyBTaW11bGF0ZSBubyBUVFlcbiAgICAgIGNvbnN0IG9yaWdpbmFsSXNUVFkgPSBwcm9jZXNzLnN0ZGluLmlzVFRZO1xuICAgICAgcHJvY2Vzcy5zdGRpbi5pc1RUWSA9IGZhbHNlO1xuXG4gICAgICBhd2FpdCBhc3NlcnQucmVqZWN0cyhcbiAgICAgICAgY2xpSG9va3MucHJvbXB0KCdFbnRlciB2YWx1ZTonKSxcbiAgICAgICAgL05vdCBpbiBpbnRlcmFjdGl2ZSB0ZXJtaW5hbC9cbiAgICAgICk7XG5cbiAgICAgIHByb2Nlc3Muc3RkaW4uaXNUVFkgPSBvcmlnaW5hbElzVFRZO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnQ2xhdWRlIEludGVncmF0aW9uJywgKCkgPT4ge1xuICAgIGxldCBjbGF1ZGU7XG5cbiAgICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICAgIGNsYXVkZSA9IG5ldyBDbGF1ZGVJbnRlZ3JhdGlvbigpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgQVBJIGtleSB2YWxpZGF0aW9uJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY2xhdWRlLnNldEFwaUtleSgnJyk7IC8vIEVtcHR5IEFQSSBrZXlcblxuICAgICAgYXdhaXQgYXNzZXJ0LnJlamVjdHMoXG4gICAgICAgIGNsYXVkZS5jb21wbGV0ZSh7IHByb21wdDogJ3Rlc3QnIH0pLFxuICAgICAgICAvSW52YWxpZCBBUEkga2V5L1xuICAgICAgKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIHJhdGUgbGltaXRpbmcnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjbGF1ZGUuc2V0UmF0ZUxpbWl0KDEpOyAvLyAxIHJlcXVlc3QgcGVyIHNlY29uZFxuICAgICAgXG4gICAgICBjb25zdCBwcm9taXNlcyA9IFtdO1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCA1OyBpKyspIHtcbiAgICAgICAgcHJvbWlzZXMucHVzaChjbGF1ZGUuY29tcGxldGUoeyBwcm9tcHQ6IGB0ZXN0ICR7aX1gIH0pKTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgcmVzdWx0cyA9IGF3YWl0IFByb21pc2UuYWxsU2V0dGxlZChwcm9taXNlcyk7XG4gICAgICBjb25zdCByZWplY3RlZCA9IHJlc3VsdHMuZmlsdGVyKHIgPT4gci5zdGF0dXMgPT09ICdyZWplY3RlZCcpO1xuICAgICAgXG4gICAgICBhc3NlcnQocmVqZWN0ZWQubGVuZ3RoID4gMCwgJ1NvbWUgcmVxdWVzdHMgc2hvdWxkIGJlIHJhdGUgbGltaXRlZCcpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgcmVzcG9uc2UgcGFyc2luZyBlcnJvcnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjbGF1ZGUuX21vY2tSZXNwb25zZSA9ICdpbnZhbGlkLWpzb24nO1xuXG4gICAgICBhd2FpdCBhc3NlcnQucmVqZWN0cyhcbiAgICAgICAgY2xhdWRlLmNvbXBsZXRlKHsgcHJvbXB0OiAndGVzdCcgfSksXG4gICAgICAgIC9GYWlsZWQgdG8gcGFyc2UgcmVzcG9uc2UvXG4gICAgICApO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgY29udGV4dCB3aW5kb3cgb3ZlcmZsb3cnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBodWdlUHJvbXB0ID0gJ3gnLnJlcGVhdCgyMDAwMDApOyAvLyBFeGNlZWRzIGNvbnRleHQgd2luZG93XG5cbiAgICAgIGF3YWl0IGFzc2VydC5yZWplY3RzKFxuICAgICAgICBjbGF1ZGUuY29tcGxldGUoeyBwcm9tcHQ6IGh1Z2VQcm9tcHQgfSksXG4gICAgICAgIC9Db250ZXh0IHdpbmRvdyBleGNlZWRlZC9cbiAgICAgICk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdBZHZhbmNlZCBDb21tYW5kcycsICgpID0+IHtcbiAgICBsZXQgY29tbWFuZHM7XG5cbiAgICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICAgIGNvbW1hbmRzID0gbmV3IEFkdmFuY2VkQ29tbWFuZHMoKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIGNvbW1hbmQgcmVnaXN0cmF0aW9uIGNvbmZsaWN0cycsICgpID0+IHtcbiAgICAgIGNvbW1hbmRzLnJlZ2lzdGVyKCd0ZXN0JywgKCkgPT4ge30pO1xuICAgICAgXG4gICAgICBhc3NlcnQudGhyb3dzKFxuICAgICAgICAoKSA9PiBjb21tYW5kcy5yZWdpc3RlcigndGVzdCcsICgpID0+IHt9KSxcbiAgICAgICAgL0NvbW1hbmQgYWxyZWFkeSBleGlzdHMvXG4gICAgICApO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgY29tbWFuZCBhbGlhcyBjb25mbGljdHMnLCAoKSA9PiB7XG4gICAgICBjb21tYW5kcy5yZWdpc3RlcigndGVzdCcsICgpID0+IHt9LCB7IGFsaWFzZXM6IFsndCddIH0pO1xuICAgICAgXG4gICAgICBhc3NlcnQudGhyb3dzKFxuICAgICAgICAoKSA9PiBjb21tYW5kcy5yZWdpc3RlcigndGVzdDInLCAoKSA9PiB7fSwgeyBhbGlhc2VzOiBbJ3QnXSB9KSxcbiAgICAgICAgL0FsaWFzIGFscmVhZHkgaW4gdXNlL1xuICAgICAgKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIGNvbW1hbmQgcGVybWlzc2lvbiBlcnJvcnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb21tYW5kcy5yZWdpc3RlcignYWRtaW4nLCAoKSA9PiB7fSwgeyBcbiAgICAgICAgcmVxdWlyZXNBZG1pbjogdHJ1ZSBcbiAgICAgIH0pO1xuXG4gICAgICBhd2FpdCBhc3NlcnQucmVqZWN0cyhcbiAgICAgICAgY29tbWFuZHMuZXhlY3V0ZSgnYWRtaW4nLCB7fSwgeyBpc0FkbWluOiBmYWxzZSB9KSxcbiAgICAgICAgL0luc3VmZmljaWVudCBwZXJtaXNzaW9ucy9cbiAgICAgICk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBjb21tYW5kIHZhbGlkYXRpb24gc2NoZW1hcycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbW1hbmRzLnJlZ2lzdGVyKCd2YWxpZGF0ZWQnLCAoYXJncykgPT4gYXJncywge1xuICAgICAgICBzY2hlbWE6IHtcbiAgICAgICAgICBuYW1lOiB7IHR5cGU6ICdzdHJpbmcnLCByZXF1aXJlZDogdHJ1ZSB9LFxuICAgICAgICAgIGFnZTogeyB0eXBlOiAnbnVtYmVyJywgbWluOiAwIH1cbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIGF3YWl0IGFzc2VydC5yZWplY3RzKFxuICAgICAgICBjb21tYW5kcy5leGVjdXRlKCd2YWxpZGF0ZWQnLCB7IGFnZTogLTUgfSksXG4gICAgICAgIC9WYWxpZGF0aW9uIGZhaWxlZC9cbiAgICAgICk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdSZW1vdGUgSW50ZWdyYXRpb24nLCAoKSA9PiB7XG4gICAgbGV0IHJlbW90ZTtcblxuICAgIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgICAgcmVtb3RlID0gbmV3IFJlbW90ZUludGVncmF0aW9uKCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBjb25uZWN0aW9uIGZhaWx1cmVzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgYXdhaXQgYXNzZXJ0LnJlamVjdHMoXG4gICAgICAgIHJlbW90ZS5jb25uZWN0KCdpbnZhbGlkOi8vdXJsJyksXG4gICAgICAgIC9GYWlsZWQgdG8gY29ubmVjdC9cbiAgICAgICk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBhdXRoZW50aWNhdGlvbiBmYWlsdXJlcycsIGFzeW5jICgpID0+IHtcbiAgICAgIHJlbW90ZS5zZXRDcmVkZW50aWFscyh7IHRva2VuOiAnaW52YWxpZCcgfSk7XG5cbiAgICAgIGF3YWl0IGFzc2VydC5yZWplY3RzKFxuICAgICAgICByZW1vdGUuYXV0aGVudGljYXRlKCksXG4gICAgICAgIC9BdXRoZW50aWNhdGlvbiBmYWlsZWQvXG4gICAgICApO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgbWVzc2FnZSBzZXJpYWxpemF0aW9uIGVycm9ycycsIGFzeW5jICgpID0+IHtcbiAgICAgIGF3YWl0IHJlbW90ZS5jb25uZWN0KCd3czovL2xvY2FsaG9zdDozMDAwJyk7XG4gICAgICBcbiAgICAgIGNvbnN0IGNpcmN1bGFyUmVmID0ge307XG4gICAgICBjaXJjdWxhclJlZi5zZWxmID0gY2lyY3VsYXJSZWY7XG5cbiAgICAgIGF3YWl0IGFzc2VydC5yZWplY3RzKFxuICAgICAgICByZW1vdGUuc2VuZChjaXJjdWxhclJlZiksXG4gICAgICAgIC9GYWlsZWQgdG8gc2VyaWFsaXplIG1lc3NhZ2UvXG4gICAgICApO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgcmVjb25uZWN0aW9uIGxvZ2ljJywgYXN5bmMgKCkgPT4ge1xuICAgICAgcmVtb3RlLnNldEF1dG9SZWNvbm5lY3QodHJ1ZSwgeyBtYXhSZXRyaWVzOiAzIH0pO1xuICAgICAgXG4gICAgICBsZXQgYXR0ZW1wdHMgPSAwO1xuICAgICAgcmVtb3RlLm9uUmVjb25uZWN0QXR0ZW1wdCA9ICgpID0+IGF0dGVtcHRzKys7XG5cbiAgICAgIGF3YWl0IHJlbW90ZS5jb25uZWN0KCd3czovL2ludmFsaWQtaG9zdCcpO1xuICAgICAgXG4gICAgICAvLyBXYWl0IGZvciByZWNvbm5lY3Rpb24gYXR0ZW1wdHNcbiAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCAxMDAwKSk7XG4gICAgICBcbiAgICAgIGFzc2VydChhdHRlbXB0cyA+PSAxLCAnU2hvdWxkIGF0dGVtcHQgcmVjb25uZWN0aW9uJyk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdHaXRIdWIgQ29vcmRpbmF0b3InLCAoKSA9PiB7XG4gICAgbGV0IGNvb3JkaW5hdG9yO1xuXG4gICAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgICBjb29yZGluYXRvciA9IG5ldyBHaXRIdWJDb29yZGluYXRvcigpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgUFIgY3JlYXRpb24gZmFpbHVyZXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBhd2FpdCBhc3NlcnQucmVqZWN0cyhcbiAgICAgICAgY29vcmRpbmF0b3IuY3JlYXRlUFIoe1xuICAgICAgICAgIHRpdGxlOiAnJywgLy8gRW1wdHkgdGl0bGVcbiAgICAgICAgICBib2R5OiAnVGVzdCBQUidcbiAgICAgICAgfSksXG4gICAgICAgIC9QUiB0aXRsZSByZXF1aXJlZC9cbiAgICAgICk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBicmFuY2ggcHJvdGVjdGlvbiB2aW9sYXRpb25zJywgYXN5bmMgKCkgPT4ge1xuICAgICAgYXdhaXQgYXNzZXJ0LnJlamVjdHMoXG4gICAgICAgIGNvb3JkaW5hdG9yLnB1c2goe1xuICAgICAgICAgIGJyYW5jaDogJ21haW4nLFxuICAgICAgICAgIGZpbGVzOiBbeyBwYXRoOiAndGVzdC5qcycsIGNvbnRlbnQ6ICd0ZXN0JyB9XSxcbiAgICAgICAgICBmb3JjZTogdHJ1ZVxuICAgICAgICB9KSxcbiAgICAgICAgL0JyYW5jaCBwcm90ZWN0aW9uL1xuICAgICAgKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIG1lcmdlIGNvbmZsaWN0IGRldGVjdGlvbicsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNvb3JkaW5hdG9yLmNoZWNrTWVyZ2VhYmlsaXR5KHtcbiAgICAgICAgYmFzZTogJ21haW4nLFxuICAgICAgICBoZWFkOiAnZmVhdHVyZS1icmFuY2gnXG4gICAgICB9KTtcblxuICAgICAgaWYgKCFyZXN1bHQubWVyZ2VhYmxlKSB7XG4gICAgICAgIGFzc2VydChyZXN1bHQuY29uZmxpY3RzLmxlbmd0aCA+IDAsICdTaG91bGQgZGV0ZWN0IGNvbmZsaWN0cycpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgd2ViaG9vayBzaWduYXR1cmUgdmFsaWRhdGlvbicsICgpID0+IHtcbiAgICAgIGNvbnN0IHBheWxvYWQgPSB7IGV2ZW50OiAncHVzaCcgfTtcbiAgICAgIGNvbnN0IGludmFsaWRTaWduYXR1cmUgPSAnaW52YWxpZCc7XG5cbiAgICAgIGFzc2VydC50aHJvd3MoXG4gICAgICAgICgpID0+IGNvb3JkaW5hdG9yLnZhbGlkYXRlV2ViaG9vayhwYXlsb2FkLCBpbnZhbGlkU2lnbmF0dXJlKSxcbiAgICAgICAgL0ludmFsaWQgd2ViaG9vayBzaWduYXR1cmUvXG4gICAgICApO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnQ2xhdWRlIEhvb2tzIEludGVncmF0aW9uJywgKCkgPT4ge1xuICAgIGxldCBjbGF1ZGVIb29rcztcblxuICAgIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgICAgY2xhdWRlSG9va3MgPSBuZXcgQ2xhdWRlSG9va3MoKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIHByZS10YXNrIGhvb2sgZmFpbHVyZXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjbGF1ZGVIb29rcy5yZWdpc3RlcigncHJlLXRhc2snLCBhc3luYyAoY29udGV4dCkgPT4ge1xuICAgICAgICBpZiAoIWNvbnRleHQudGFza0lkKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdUYXNrIElEIHJlcXVpcmVkJyk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICBhd2FpdCBhc3NlcnQucmVqZWN0cyhcbiAgICAgICAgY2xhdWRlSG9va3MucnVuUHJlVGFzayh7fSksXG4gICAgICAgIC9UYXNrIElEIHJlcXVpcmVkL1xuICAgICAgKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIHBvc3QtZWRpdCBob29rIHZhbGlkYXRpb24nLCBhc3luYyAoKSA9PiB7XG4gICAgICBjbGF1ZGVIb29rcy5yZWdpc3RlcigncG9zdC1lZGl0JywgYXN5bmMgKGNvbnRleHQpID0+IHtcbiAgICAgICAgaWYgKGNvbnRleHQuZmlsZS5lbmRzV2l0aCgnLnB5JykgJiYgIWNvbnRleHQuZm9ybWF0dGVkKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdQeXRob24gZmlsZXMgbXVzdCBiZSBmb3JtYXR0ZWQnKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIGF3YWl0IGFzc2VydC5yZWplY3RzKFxuICAgICAgICBjbGF1ZGVIb29rcy5ydW5Qb3N0RWRpdCh7XG4gICAgICAgICAgZmlsZTogJ3Rlc3QucHknLFxuICAgICAgICAgIGZvcm1hdHRlZDogZmFsc2VcbiAgICAgICAgfSksXG4gICAgICAgIC9QeXRob24gZmlsZXMgbXVzdCBiZSBmb3JtYXR0ZWQvXG4gICAgICApO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgc2Vzc2lvbiBwZXJzaXN0ZW5jZSBlcnJvcnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjbGF1ZGVIb29rcy5fc3RvcmFnZSA9IG51bGw7IC8vIFNpbXVsYXRlIHN0b3JhZ2UgZmFpbHVyZVxuXG4gICAgICBhd2FpdCBhc3NlcnQucmVqZWN0cyhcbiAgICAgICAgY2xhdWRlSG9va3Muc2F2ZVNlc3Npb24oeyBpZDogJ3Rlc3QnLCBkYXRhOiB7fSB9KSxcbiAgICAgICAgL0ZhaWxlZCB0byBzYXZlIHNlc3Npb24vXG4gICAgICApO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgaG9vayBleGVjdXRpb24gb3JkZXInLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBvcmRlciA9IFtdO1xuXG4gICAgICBjbGF1ZGVIb29rcy5yZWdpc3Rlcignb3JkZXJlZCcsIGFzeW5jICgpID0+IG9yZGVyLnB1c2goMSksIHsgcHJpb3JpdHk6IDEwIH0pO1xuICAgICAgY2xhdWRlSG9va3MucmVnaXN0ZXIoJ29yZGVyZWQnLCBhc3luYyAoKSA9PiBvcmRlci5wdXNoKDIpLCB7IHByaW9yaXR5OiA1IH0pO1xuICAgICAgY2xhdWRlSG9va3MucmVnaXN0ZXIoJ29yZGVyZWQnLCBhc3luYyAoKSA9PiBvcmRlci5wdXNoKDMpLCB7IHByaW9yaXR5OiAxNSB9KTtcblxuICAgICAgYXdhaXQgY2xhdWRlSG9va3MuZXhlY3V0ZSgnb3JkZXJlZCcsIHt9KTtcbiAgICAgIFxuICAgICAgYXNzZXJ0LmRlZXBFcXVhbChvcmRlciwgWzIsIDEsIDNdLCAnSG9va3Mgc2hvdWxkIGV4ZWN1dGUgYnkgcHJpb3JpdHknKTtcbiAgICB9KTtcbiAgfSk7XG59KTtcblxuLy8gUnVuIHRlc3RzIHdoZW4gZXhlY3V0ZWQgZGlyZWN0bHlcbmlmIChpbXBvcnQubWV0YS51cmwgPT09IGBmaWxlOi8vJHtwcm9jZXNzLmFyZ3ZbMV19YCkge1xuICBjb25zb2xlLmxvZygnUnVubmluZyBob29rcyBjb3ZlcmFnZSB0ZXN0cy4uLicpO1xuICBcbiAgLy8gUnVuIGFsbCB0ZXN0c1xuICBjb25zdCB7IHJ1biB9ID0gYXdhaXQgaW1wb3J0KCcuL3Rlc3QtcnVubmVyLmpzJyk7XG4gIGF3YWl0IHJ1bihfX2ZpbGVuYW1lKTtcbn0iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxPQUFPQSxNQUFNLE1BQU0sUUFBUTtBQUMzQixTQUFTQyxZQUFZLFFBQVEsdUJBQXVCO0FBQ3BELFNBQVNDLFFBQVEsUUFBUSxxQkFBcUI7QUFDOUMsU0FDRUMsaUJBQWlCLEVBQ2pCQyxnQkFBZ0IsRUFDaEJDLGlCQUFpQixRQUNaLG9DQUFvQztBQUMzQyxTQUNFQyxpQkFBaUIsRUFDakJDLFdBQVcsUUFDTixvQ0FBb0M7QUFFM0NDLFFBQVEsQ0FBQyw0QkFBNEIsRUFBRSxNQUFN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LENBQUM7O01BRTdCLE1BQU14SCxNQUFNLENBQUNnQixPQUFPLENBQ2xCNkYsV0FBVyxDQUFDWSxXQUFXLENBQUM7UUFBRUMsRUFBRSxFQUFFLE1BQU07UUFBRXhHLElBQUksRUFBRSxDQUFDO01BQUUsQ0FBQyxDQUFDLEVBQ2pELHdCQUNGLENBQUM7SUFDSCxDQUFDLEVBQUM7SUFFRlAsRUFBRSxDQUFDLG9DQUFvQyxlQUFBRyxpQkFBQSxDQUFFLGFBQVk7TUFDbkQsTUFBTTZHLEtBQUssR0FBRyxFQUFFO01BRWhCZCxXQUFXLENBQUNoRyxRQUFRLENBQUMsU0FBUyxlQUFBQyxpQkFBQSxDQUFFO1FBQUEsT0FBWTZHLEtBQUssQ0FBQzdGLElBQUksQ0FBQyxDQUFDLENBQUM7TUFBQSxJQUFFO1FBQUU4RixRQUFRLEVBQUU7TUFBRyxDQUFDLENBQUM7TUFDNUVmLFdBQVcsQ0FBQ2hHLFFBQVEsQ0FBQyxTQUFTLGVBQUFDLGlCQUFBLENBQUU7UUFBQSxPQUFZNkcsS0FBSyxDQUFDN0YsSUFBSSxDQUFDLENBQUMsQ0FBQztNQUFBLElBQUU7UUFBRThGLFFBQVEsRUFBRTtNQUFFLENBQUMsQ0FBQztNQUMzRWYsV0FBVyxDQUFDaEcsUUFBUSxDQUFDLFNBQVMsZUFBQUMsaUJBQUEsQ0FBRTtRQUFBLE9BQVk2RyxLQUFLLENBQUM3RixJQUFJLENBQUMsQ0FBQyxDQUFDO01BQUEsSUFBRTtRQUFFOEYsUUFBUSxFQUFFO01BQUcsQ0FBQyxDQUFDO01BRTVFLE1BQU1mLFdBQVcsQ0FBQzVGLE9BQU8sQ0FBQyxTQUFTLEVBQUUsQ0FBQyxDQUFDLENBQUM7TUFFeENqQixNQUFNLENBQUNvQyxTQUFTLENBQUN1RixLQUFLLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLGtDQUFrQyxDQUFDO0lBQ3hFLENBQUMsRUFBQztFQUNKLENBQUMsQ0FBQztBQUNKLENBQUMsQ0FBQzs7QUFFRjtBQUNBLElBQUlFLE1BQU0sQ0FBQ0MsSUFBSSxDQUFDQyxHQUFHLEtBQUssVUFBVTlFLE9BQU8sQ0FBQytFLElBQUksQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFO0VBQ25EQyxPQUFPLENBQUNDLEdBQUcsQ0FBQyxpQ0FBaUMsQ0FBQzs7RUFFOUM7RUFDQSxNQUFNO0lBQUVDO0VBQUksQ0FBQyxHQUFHLE1BQU0sTUFBTSxDQUFDLGtCQUFrQixDQUFDO0VBQ2hELE1BQU1BLEdBQUcsQ0FBQ0MsVUFBVSxDQUFDO0FBQ3ZCIiwiaWdub3JlTGlzdCI6W119