b5bbc8a21a4b0a2ead131b51563b27ab
function asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }
function _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, "next", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, "throw", n); } _next(void 0); }); }; }
/**
 * Cross-Browser Compatibility Tests
 * Tests WASM functionality across different browser environments
 */

import { describe, it, expect, beforeAll, afterAll } from '@playwright/test';
import { chromium, firefox, webkit } from 'playwright';
import path from 'path';
import { fileURLToPath } from 'url';
import { createServer } from 'http';
import { readFile } from 'fs/promises';
import handler from 'serve-handler';
const __filename = fileURLToPath(import.meta.url);
const __dirname = path.dirname(__filename);
describe('Cross-Browser WASM Compatibility', () => {
  let server;
  let serverUrl;
  const browsers = [];
  beforeAll(/*#__PURE__*/_asyncToGenerator(function* () {
    // Start local server to serve test files
    server = createServer((request, response) => {
      return handler(request, response, {
        public: path.join(__dirname, '../../'),
        headers: [{
          source: '**/*.wasm',
          headers: [{
            key: 'Content-Type',
            value: 'application/wasm'
          }]
        }, {
          source: '**/*',
          headers: [{
            key: 'Cross-Origin-Embedder-Policy',
            value: 'require-corp'
          }, {
            key: 'Cross-Origin-Opener-Policy',
            value: 'same-origin'
          }]
        }]
      });
    });
    yield new Promise(resolve => {
      server.listen(0, '127.0.0.1', () => {
        const {
          port
        } = server.address();
        serverUrl = `http://127.0.0.1:${port}`;
        console.log(`Test server running at ${serverUrl}`);
        resolve();
      });
    });

    // Launch browsers
    const browserTypes = [{
      name: 'chromium',
      launcher: chromium
    }, {
      name: 'firefox',
      launcher: firefox
    }, {
      name: 'webkit',
      launcher: webkit
    }];
    for (const {
      name,
      launcher
    } of browserTypes) {
      const browser = yield launcher.launch({
        headless: true,
        args: name === 'chromium' ? ['--enable-unsafe-webgpu'] : []
      });
      browsers.push({
        name,
        browser
      });
    }
  }));
  afterAll(/*#__PURE__*/_asyncToGenerator(function* () {
    // Close all browsers
    for (const {
      browser
    } of browsers) {
      yield browser.close();
    }

    // Close server
    yield new Promise(resolve => {
      server.close(resolve);
    });
  }));
  describe('Basic WASM Support', () => {
    for (const {
      name,
      browser
    } of browsers) {
      it(`should detect WASM support in ${name}`, /*#__PURE__*/_asyncToGenerator(function* () {
        const context = yield browser.newContext();
        const page = yield context.newPage();
        yield page.goto(`${serverUrl}/test/browser/wasm-test.html`);
        const wasmSupported = yield page.evaluate(() => {
          return typeof WebAssembly !== 'undefined' && typeof WebAssembly.instantiate === 'function';
        });
        expect(wasmSupported).toBe(true);
        yield context.close();
      }));
      it(`should load WASM module in ${name}`, /*#__PURE__*/_asyncToGenerator(function* () {
        const context = yield browser.newContext();
        const page = yield context.newPage();
        yield page.goto(`${serverUrl}/test/browser/wasm-test.html`);
        const moduleLoaded = yield page.evaluate(/*#__PURE__*/_asyncToGenerator(function* () {
          try {
            const response = yield fetch('/wasm/ruv_swarm_wasm_bg.wasm');
            const buffer = yield response.arrayBuffer();
            const module = yield WebAssembly.compile(buffer);
            return module instanceof WebAssembly.Module;
          } catch (error) {
            console.error('WASM load error:', error);
            return false;
          }
        }));
        expect(moduleLoaded).toBe(true);
        yield context.close();
      }));
    }
  });
  describe('SIMD Support', () => {
    for (const {
      name,
      browser
    } of browsers) {
      it(`should detect SIMD support in ${name}`, /*#__PURE__*/_asyncToGenerator(function* () {
        const context = yield browser.newContext();
        const page = yield context.newPage();
        yield page.goto(`${serverUrl}/test/browser/wasm-test.html`);
        const simdInfo = yield page.evaluate(/*#__PURE__*/_asyncToGenerator(function* () {
          // Load RuvSwarm module
          const {
            RuvSwarm
          } = yield import('/src/index-enhanced.js');
          const swarm = yield RuvSwarm.initialize({
            debug: true
          });
          return {
            simdDetected: swarm.features.simd,
            simdInWasm: yield swarm.wasmLoader.detectSIMDSupport()
          };
        }));
        console.log(`${name} SIMD support:`, simdInfo);

        // SIMD is optional, so we just log the result
        if (simdInfo.simdDetected) {
          expect(simdInfo.simdInWasm).toBe(true);
        }
        yield context.close();
      }));
    }
  });
  describe('Memory Management', () => {
    for (const {
      name,
      browser
    } of browsers) {
      it(`should handle SharedArrayBuffer in ${name}`, /*#__PURE__*/_asyncToGenerator(function* () {
        const context = yield browser.newContext();
        const page = yield context.newPage();
        yield page.goto(`${serverUrl}/test/browser/wasm-test.html`);
        const sharedMemoryTest = yield page.evaluate(() => {
          try {
            // Check if SharedArrayBuffer is available
            if (typeof SharedArrayBuffer === 'undefined') {
              return {
                available: false,
                reason: 'SharedArrayBuffer not defined'
              };
            }

            // Try to create one
            const buffer = new SharedArrayBuffer(1024);
            const view = new Int32Array(buffer);
            view[0] = 42;

            // Test Atomics if available
            if (typeof Atomics !== 'undefined') {
              Atomics.store(view, 0, 123);
              const value = Atomics.load(view, 0);
              return {
                available: true,
                atomicsSupported: true,
                testValue: value
              };
            }
            return {
              available: true,
              atomicsSupported: false
            };
          } catch (error) {
            return {
              available: false,
              reason: error.message
            };
          }
        });
        console.log(`${name} SharedArrayBuffer:`, sharedMemoryTest);

        // SharedArrayBuffer requires specific headers, may not be available
        if (sharedMemoryTest.available && sharedMemoryTest.atomicsSupported) {
          expect(sharedMemoryTest.testValue).toBe(123);
        }
        yield context.close();
      }));
      it(`should handle memory growth in ${name}`, /*#__PURE__*/_asyncToGenerator(function* () {
        const context = yield browser.newContext();
        const page = yield context.newPage();
        yield page.goto(`${serverUrl}/test/browser/wasm-test.html`);
        const memoryTest = yield page.evaluate(/*#__PURE__*/_asyncToGenerator(function* () {
          const {
            RuvSwarm
          } = yield import('/src/index-enhanced.js');
          const swarm = yield RuvSwarm.initialize({
            debug: false
          });
          const initialMemory = swarm.wasmLoader.getMemorySize();

          // Allocate large amount of memory
          const allocations = [];
          for (let i = 0; i < 10; i++) {
            const data = new Float32Array(100000); // ~400KB each
            allocations.push(yield swarm.wasmLoader.allocateAndStore(data));
          }
          const afterAllocMemory = swarm.wasmLoader.getMemorySize();

          // Clean up
          for (const ptr of allocations) {
            yield swarm.wasmLoader.deallocate(ptr);
          }
          return {
            initial: initialMemory,
            afterAlloc: afterAllocMemory,
            grew: afterAllocMemory > initialMemory
          };
        }));
        expect(memoryTest.grew).toBe(true);
        console.log(`${name} memory growth: ${memoryTest.initial} -> ${memoryTest.afterAlloc}`);
        yield context.close();
      }));
    }
  });
  describe('Neural Network Operations', () => {
    for (const {
      name,
      browser
    } of browsers) {
      it(`should run neural network in ${name}`, /*#__PURE__*/_asyncToGenerator(function* () {
        const context = yield browser.newContext();
        const page = yield context.newPage();
        yield page.goto(`${serverUrl}/test/browser/wasm-test.html`);
        const nnTest = yield page.evaluate(/*#__PURE__*/_asyncToGenerator(function* () {
          const {
            RuvSwarm
          } = yield import('/src/index-enhanced.js');
          const swarm = yield RuvSwarm.initialize({
            enableNeuralNetworks: true,
            debug: false
          });

          // Create simple neural network
          const network = yield swarm.neuralManager.createNetwork({
            type: 'mlp',
            layers: [{
              units: 10,
              activation: 'relu'
            }, {
              units: 5,
              activation: 'softmax'
            }]
          });

          // Run inference
          const input = new Float32Array(10).fill(0.5);
          const startTime = performance.now();
          const output = yield network.predict(input);
          const inferenceTime = performance.now() - startTime;
          return {
            success: true,
            outputLength: output.length,
            inferenceTime,
            outputSum: Array.from(output).reduce((a, b) => a + b, 0)
          };
        }));
        expect(nnTest.success).toBe(true);
        expect(nnTest.outputLength).toBe(5);
        expect(nnTest.outputSum).toBeCloseTo(1.0, 1); // Softmax should sum to ~1
        console.log(`${name} NN inference time: ${nnTest.inferenceTime.toFixed(2)}ms`);
        yield context.close();
      }));
    }
  });
  describe('Swarm Operations', () => {
    for (const {
      name,
      browser
    } of browsers) {
      it(`should create and manage swarm in ${name}`, /*#__PURE__*/_asyncToGenerator(function* () {
        const context = yield browser.newContext();
        const page = yield context.newPage();
        yield page.goto(`${serverUrl}/test/browser/wasm-test.html`);
        const swarmTest = yield page.evaluate(/*#__PURE__*/_asyncToGenerator(function* () {
          const {
            RuvSwarm
          } = yield import('/src/index-enhanced.js');
          const ruvSwarm = yield RuvSwarm.initialize({
            debug: false
          });

          // Create swarm
          const swarm = yield ruvSwarm.createSwarm({
            name: 'browser-test-swarm',
            topology: 'mesh',
            maxAgents: 5
          });

          // Spawn agents
          const agents = [];
          for (let i = 0; i < 3; i++) {
            const agent = yield swarm.spawn({
              type: ['researcher', 'coder', 'analyst'][i]
            });
            agents.push({
              id: agent.id,
              type: agent.type,
              status: agent.status
            });
          }

          // Execute task
          const result = yield swarm.orchestrate({
            task: 'test-task',
            strategy: 'parallel'
          });
          return {
            swarmCreated: true,
            agentCount: agents.length,
            agents,
            taskCompleted: result.completed
          };
        }));
        expect(swarmTest.swarmCreated).toBe(true);
        expect(swarmTest.agentCount).toBe(3);
        expect(swarmTest.taskCompleted).toBe(true);
        yield context.close();
      }));
    }
  });
  describe('Performance Characteristics', () => {
    for (const {
      name,
      browser
    } of browsers) {
      it(`should measure WASM performance in ${name}`, /*#__PURE__*/_asyncToGenerator(function* () {
        const context = yield browser.newContext();
        const page = yield context.newPage();
        yield page.goto(`${serverUrl}/test/browser/wasm-test.html`);
        const perfTest = yield page.evaluate(/*#__PURE__*/_asyncToGenerator(function* () {
          const {
            RuvSwarm
          } = yield import('/src/index-enhanced.js');
          const swarm = yield RuvSwarm.initialize({
            useSIMD: true,
            debug: false
          });
          const benchmarks = {};

          // Benchmark 1: Vector operations
          const vectorSize = 100000;
          const a = new Float32Array(vectorSize).fill(1.0);
          const b = new Float32Array(vectorSize).fill(2.0);
          const vectorStart = performance.now();
          const vectorResult = yield swarm.wasmLoader.vectorAdd(a, b);
          benchmarks.vectorOps = performance.now() - vectorStart;

          // Benchmark 2: Matrix multiplication
          const matrixSize = 100;
          const matA = new Float32Array(matrixSize * matrixSize).fill(1.0);
          const matB = new Float32Array(matrixSize * matrixSize).fill(2.0);
          const matrixStart = performance.now();
          const matrixResult = yield swarm.wasmLoader.matrixMultiply(matA, matB, matrixSize, matrixSize, matrixSize);
          benchmarks.matrixOps = performance.now() - matrixStart;

          // Benchmark 3: Neural network
          const network = yield swarm.neuralManager.createNetwork({
            type: 'mlp',
            layers: [{
              units: 100,
              activation: 'relu'
            }, {
              units: 50,
              activation: 'relu'
            }, {
              units: 10,
              activation: 'softmax'
            }]
          });
          const nnInput = new Float32Array(100).fill(0.5);
          const iterations = 100;
          const nnStart = performance.now();
          for (let i = 0; i < iterations; i++) {
            yield network.predict(nnInput);
          }
          benchmarks.nnInference = (performance.now() - nnStart) / iterations;
          return benchmarks;
        }));
        console.log(`${name} Performance Benchmarks:`);
        console.log(`  Vector ops (100k elements): ${perfTest.vectorOps.toFixed(2)}ms`);
        console.log(`  Matrix mult (100x100): ${perfTest.matrixOps.toFixed(2)}ms`);
        console.log(`  NN inference (avg): ${perfTest.nnInference.toFixed(2)}ms`);

        // Performance should be reasonable across browsers
        expect(perfTest.vectorOps).toBeLessThan(50);
        expect(perfTest.matrixOps).toBeLessThan(100);
        expect(perfTest.nnInference).toBeLessThan(5);
        yield context.close();
      }));
    }
  });
  describe('Error Handling', () => {
    for (const {
      name,
      browser
    } of browsers) {
      it(`should handle WASM errors gracefully in ${name}`, /*#__PURE__*/_asyncToGenerator(function* () {
        const context = yield browser.newContext();
        const page = yield context.newPage();
        yield page.goto(`${serverUrl}/test/browser/wasm-test.html`);
        const errorTest = yield page.evaluate(/*#__PURE__*/_asyncToGenerator(function* () {
          const {
            RuvSwarm
          } = yield import('/src/index-enhanced.js');
          const swarm = yield RuvSwarm.initialize({
            debug: false
          });
          const errors = [];

          // Test 1: Invalid agent type
          try {
            yield swarm.createSwarm({
              name: 'test'
            }).then(s => s.spawn({
              type: 'invalid-type'
            }));
          } catch (error) {
            errors.push({
              test: 'invalid-agent-type',
              caught: true,
              message: error.message
            });
          }

          // Test 2: Memory allocation failure
          try {
            yield swarm.wasmLoader.allocate(Number.MAX_SAFE_INTEGER);
          } catch (error) {
            errors.push({
              test: 'memory-allocation',
              caught: true,
              message: error.message
            });
          }

          // Test 3: Invalid neural network config
          try {
            yield swarm.neuralManager.createNetwork({
              type: 'invalid',
              layers: []
            });
          } catch (error) {
            errors.push({
              test: 'invalid-network',
              caught: true,
              message: error.message
            });
          }
          return errors;
        }));
        expect(errorTest).toHaveLength(3);
        errorTest.forEach(error => {
          expect(error.caught).toBe(true);
          expect(error.message).toBeTruthy();
        });
        yield context.close();
      }));
    }
  });
  describe('WebWorker Integration', () => {
    for (const {
      name,
      browser
    } of browsers) {
      it(`should run WASM in WebWorker in ${name}`, /*#__PURE__*/_asyncToGenerator(function* () {
        const context = yield browser.newContext();
        const page = yield context.newPage();
        yield page.goto(`${serverUrl}/test/browser/wasm-test.html`);
        const workerTest = yield page.evaluate(/*#__PURE__*/_asyncToGenerator(function* () {
          // Create worker script
          const workerScript = `
            importScripts('/src/index.js');
            
            self.onmessage = async (e) => {
              const { RuvSwarm } = self;
              const swarm = await RuvSwarm.initialize({ debug: false });
              
              const result = await swarm.wasmLoader.vectorAdd(
                e.data.a,
                e.data.b
              );
              
              self.postMessage({ result: Array.from(result) });
            };
          `;
          const blob = new Blob([workerScript], {
            type: 'application/javascript'
          });
          const worker = new Worker(URL.createObjectURL(blob));
          const result = yield new Promise(resolve => {
            worker.onmessage = e => resolve(e.data);
            worker.postMessage({
              a: new Float32Array([1, 2, 3, 4]),
              b: new Float32Array([5, 6, 7, 8])
            });
          });
          worker.terminate();
          return result;
        }));
        expect(workerTest.result).toEqual([6, 8, 10, 12]);
        yield context.close();
      }));
    }
  });
});

// Create test HTML file
export function createTestHTML() {
  return _createTestHTML.apply(this, arguments);
}
function _createTestHTML() {
  _createTestHTML = _asyncToGenerator(function* () {
    const html = `<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>WASM Browser Test</title>
    <meta http-equiv="Cross-Origin-Embedder-Policy" content="require-corp">
    <meta http-equiv="Cross-Origin-Opener-Policy" content="same-origin">
</head>
<body>
    <h1>RuvSwarm WASM Browser Test</h1>
    <div id="status">Loading...</div>
    <div id="results"></div>
    
    <script type="module">
        import { RuvSwarm } from '/src/index-enhanced.js';
        
        window.RuvSwarm = RuvSwarm;
        
        async function runTests() {
            const status = document.getElementById('status');
            const results = document.getElementById('results');
            
            try {
                status.textContent = 'Initializing RuvSwarm...';
                const swarm = await RuvSwarm.initialize({
                    debug: true,
                    enableNeuralNetworks: true,
                    useSIMD: true
                });
                
                status.textContent = 'RuvSwarm initialized successfully!';
                
                // Display features
                results.innerHTML = \`
                    <h2>Detected Features:</h2>
                    <ul>
                        <li>WASM Support: ✓</li>
                        <li>SIMD Support: \${swarm.features.simd ? '✓' : '✗'}</li>
                        <li>SharedArrayBuffer: \${typeof SharedArrayBuffer !== 'undefined' ? '✓' : '✗'}</li>
                        <li>Atomics: \${typeof Atomics !== 'undefined' ? '✓' : '✗'}</li>
                        <li>WebWorkers: \${typeof Worker !== 'undefined' ? '✓' : '✗'}</li>
                    </ul>
                \`;
                
                window.swarm = swarm;
            } catch (error) {
                status.textContent = 'Error: ' + error.message;
                console.error(error);
            }
        }
        
        runTests();
    </script>
</body>
</html>`;
    yield writeFile(path.join(__dirname, 'wasm-test.html'), html);
  });
  return _createTestHTML.apply(this, arguments);
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJkZXNjcmliZSIsIml0IiwiZXhwZWN0IiwiYmVmb3JlQWxsIiwiYWZ0ZXJBbGwiLCJjaHJvbWl1bSIsImZpcmVmb3giLCJ3ZWJraXQiLCJwYXRoIiwiZmlsZVVSTFRvUGF0aCIsImNyZWF0ZVNlcnZlciIsInJlYWRGaWxlIiwiaGFuZGxlciIsIl9fZmlsZW5hbWUiLCJpbXBvcnQiLCJtZXRhIiwidXJsIiwiX19kaXJuYW1lIiwiZGlybmFtZSIsInNlcnZlciIsInNlcnZlclVybCIsImJyb3dzZXJzIiwiX2FzeW5jVG9HZW5lcmF0b3IiLCJyZXF1ZXN0IiwicmVzcG9uc2UiLCJwdWJsaWMiLCJqb2luIiwiaGVhZGVycyIsInNvdXJjZSIsImtleSIsInZhbHVlIiwiUHJvbWlzZSIsInJlc29sdmUiLCJsaXN0ZW4iLCJwb3J0IiwiYWRkcmVzcyIsImNvbnNvbGUiLCJsb2ciLCJicm93c2VyVHlwZXMiLCJuYW1lIiwibGF1bmNoZXIiLCJicm93c2VyIiwibGF1bmNoIiwiaGVhZGxlc3MiLCJhcmdzIiwicHVzaCIsImNsb3NlIiwiY29udGV4dCIsIm5ld0NvbnRleHQiLCJwYWdlIiwibmV3UGFnZSIsImdvdG8iLCJ3YXNtU3VwcG9ydGVkIiwiZXZhbHVhdGUiLCJXZWJBc3NlbWJseSIsImluc3RhbnRpYXRlIiwidG9CZSIsIm1vZHVsZUxvYWRlZCIsImZldGNoIiwiYnVmZmVyIiwiYXJyYXlCdWZmZXIiLCJtb2R1bGUiLCJjb21waWxlIiwiTW9kdWxlIiwiZXJyb3IiLCJzaW1kSW5mbyIsIlJ1dlN3YXJtIiwic3dhcm0iLCJpbml0aWFsaXplIiwiZGVidWciLCJzaW1kRGV0ZWN0ZWQiLCJmZWF0dXJlcyIsInNpbWQiLCJzaW1kSW5XYXNtIiwid2FzbUxvYWRlciIsImRldGVjdFNJTURTdXBwb3J0Iiwic2hhcmVkTWVtb3J5VGVzdCIsIlNoYXJlZEFycmF5QnVmZmVyIiwiYXZhaWxhYmxlIiwicmVhc29uIiwidmlldyIsIkludDMyQXJyYXkiLCJBdG9taWNzIiwic3RvcmUiLCJsb2FkIiwiYXRvbWljc1N1cHBvcnRlZCIsInRlc3RWYWx1ZSIsIm1lc3NhZ2UiLCJtZW1vcnlUZXN0IiwiaW5pdGlhbE1lbW9yeSIsImdldE1lbW9yeVNpemUiLCJhbGxvY2F0aW9ucyIsImkiLCJkYXRhIiwiRmxvYXQzMkFycmF5IiwiYWxsb2NhdGVBbmRTdG9yZSIsImFmdGVyQWxsb2NNZW1vcnkiLCJwdHIiLCJkZWFsbG9jYXRlIiwiaW5pdGlhbCIsImFmdGVyQWxsb2MiLCJncmV3Iiwibm5UZXN0IiwiZW5hYmxlTmV1cmFsTmV0d29ya3MiLCJuZXR3b3JrIiwibmV1cmFsTWFuYWdlciIsImNyZWF0ZU5ldHdvcmsiLCJ0eXBlIiwibGF5ZXJzIiwidW5pdHMiLCJhY3RpdmF0aW9uIiwiaW5wdXQiLCJmaWxsIiwic3RhcnRUaW1lIiwicGVyZm9ybWFuY2UiLCJub3ciLCJvdXRwdXQiLCJwcmVkaWN0IiwiaW5mZXJlbmNlVGltZSIsInN1Y2Nlc3MiLCJvdXRwdXRMZW5ndGgiLCJsZW5ndGgiLCJvdXRwdXRTdW0iLCJBcnJheSIsImZyb20iLCJyZWR1Y2UiLCJhIiwiYiIsInRvQmVDbG9zZVRvIiwidG9GaXhlZCIsInN3YXJtVGVzdCIsInJ1dlN3YXJtIiwiY3JlYXRlU3dhcm0iLCJ0b3BvbG9neSIsIm1heEFnZW50cyIsImFnZW50cyIsImFnZW50Iiwic3Bhd24iLCJpZCIsInN0YXR1cyIsInJlc3VsdCIsIm9yY2hlc3RyYXRlIiwidGFzayIsInN0cmF0ZWd5Iiwic3dhcm1DcmVhdGVkIiwiYWdlbnRDb3VudCIsInRhc2tDb21wbGV0ZWQiLCJjb21wbGV0ZWQiLCJwZXJmVGVzdCIsInVzZVNJTUQiLCJiZW5jaG1hcmtzIiwidmVjdG9yU2l6ZSIsInZlY3RvclN0YXJ0IiwidmVjdG9yUmVzdWx0IiwidmVjdG9yQWRkIiwidmVjdG9yT3BzIiwibWF0cml4U2l6ZSIsIm1hdEEiLCJtYXRCIiwibWF0cml4U3RhcnQiLCJtYXRyaXhSZXN1bHQiLCJtYXRyaXhNdWx0aXBseSIsIm1hdHJpeE9wcyIsIm5uSW5wdXQiLCJpdGVyYXRpb25zIiwibm5TdGFydCIsIm5uSW5mZXJlbmNlIiwidG9CZUxlc3NUaGFuIiwiZXJyb3JUZXN0IiwiZXJyb3JzIiwidGhlbiIsInMiLCJ0ZXN0IiwiY2F1Z2h0IiwiYWxsb2NhdGUiLCJOdW1iZXIiLCJNQVhfU0FGRV9JTlRFR0VSIiwidG9IYXZlTGVuZ3RoIiwiZm9yRWFjaCIsInRvQmVUcnV0aHkiLCJ3b3JrZXJUZXN0Iiwid29ya2VyU2NyaXB0IiwiYmxvYiIsIkJsb2IiLCJ3b3JrZXIiLCJXb3JrZXIiLCJVUkwiLCJjcmVhdGVPYmplY3RVUkwiLCJvbm1lc3NhZ2UiLCJlIiwicG9zdE1lc3NhZ2UiLCJ0ZXJtaW5hdGUiLCJ0b0VxdWFsIiwiY3JlYXRlVGVzdEhUTUwiLCJfY3JlYXRlVGVzdEhUTUwiLCJhcHBseSIsImFyZ3VtZW50cyIsImh0bWwiLCJ3cml0ZUZpbGUiXSwic291cmNlcyI6WyJjcm9zcy1icm93c2VyLWNvbXBhdGliaWxpdHkudGVzdC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENyb3NzLUJyb3dzZXIgQ29tcGF0aWJpbGl0eSBUZXN0c1xuICogVGVzdHMgV0FTTSBmdW5jdGlvbmFsaXR5IGFjcm9zcyBkaWZmZXJlbnQgYnJvd3NlciBlbnZpcm9ubWVudHNcbiAqL1xuXG5pbXBvcnQgeyBkZXNjcmliZSwgaXQsIGV4cGVjdCwgYmVmb3JlQWxsLCBhZnRlckFsbCB9IGZyb20gJ0BwbGF5d3JpZ2h0L3Rlc3QnO1xuaW1wb3J0IHsgY2hyb21pdW0sIGZpcmVmb3gsIHdlYmtpdCB9IGZyb20gJ3BsYXl3cmlnaHQnO1xuaW1wb3J0IHBhdGggZnJvbSAncGF0aCc7XG5pbXBvcnQgeyBmaWxlVVJMVG9QYXRoIH0gZnJvbSAndXJsJztcbmltcG9ydCB7IGNyZWF0ZVNlcnZlciB9IGZyb20gJ2h0dHAnO1xuaW1wb3J0IHsgcmVhZEZpbGUgfSBmcm9tICdmcy9wcm9taXNlcyc7XG5pbXBvcnQgaGFuZGxlciBmcm9tICdzZXJ2ZS1oYW5kbGVyJztcblxuY29uc3QgX19maWxlbmFtZSA9IGZpbGVVUkxUb1BhdGgoaW1wb3J0Lm1ldGEudXJsKTtcbmNvbnN0IF9fZGlybmFtZSA9IHBhdGguZGlybmFtZShfX2ZpbGVuYW1lKTtcblxuZGVzY3JpYmUoJ0Nyb3NzLUJyb3dzZXIgV0FTTSBDb21wYXRpYmlsaXR5JywgKCkgPT4ge1xuICBsZXQgc2VydmVyO1xuICBsZXQgc2VydmVyVXJsO1xuICBjb25zdCBicm93c2VycyA9IFtdO1xuXG4gIGJlZm9yZUFsbChhc3luYyAoKSA9PiB7XG4gICAgLy8gU3RhcnQgbG9jYWwgc2VydmVyIHRvIHNlcnZlIHRlc3QgZmlsZXNcbiAgICBzZXJ2ZXIgPSBjcmVhdGVTZXJ2ZXIoKHJlcXVlc3QsIHJlc3BvbnNlKSA9PiB7XG4gICAgICByZXR1cm4gaGFuZGxlcihyZXF1ZXN0LCByZXNwb25zZSwge1xuICAgICAgICBwdWJsaWM6IHBhdGguam9pbihfX2Rpcm5hbWUsICcuLi8uLi8nKSxcbiAgICAgICAgaGVhZGVyczogW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIHNvdXJjZTogJyoqLyoud2FzbScsXG4gICAgICAgICAgICBoZWFkZXJzOiBbe1xuICAgICAgICAgICAgICBrZXk6ICdDb250ZW50LVR5cGUnLFxuICAgICAgICAgICAgICB2YWx1ZTogJ2FwcGxpY2F0aW9uL3dhc20nXG4gICAgICAgICAgICB9XVxuICAgICAgICAgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgc291cmNlOiAnKiovKicsXG4gICAgICAgICAgICBoZWFkZXJzOiBbe1xuICAgICAgICAgICAgICBrZXk6ICdDcm9zcy1PcmlnaW4tRW1iZWRkZXItUG9saWN5JyxcbiAgICAgICAgICAgICAgdmFsdWU6ICdyZXF1aXJlLWNvcnAnXG4gICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgIGtleTogJ0Nyb3NzLU9yaWdpbi1PcGVuZXItUG9saWN5JyxcbiAgICAgICAgICAgICAgdmFsdWU6ICdzYW1lLW9yaWdpbidcbiAgICAgICAgICAgIH1dXG4gICAgICAgICAgfVxuICAgICAgICBdXG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGF3YWl0IG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG4gICAgICBzZXJ2ZXIubGlzdGVuKDAsICcxMjcuMC4wLjEnLCAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHsgcG9ydCB9ID0gc2VydmVyLmFkZHJlc3MoKTtcbiAgICAgICAgc2VydmVyVXJsID0gYGh0dHA6Ly8xMjcuMC4wLjE6JHtwb3J0fWA7XG4gICAgICAgIGNvbnNvbGUubG9nKGBUZXN0IHNlcnZlciBydW5uaW5nIGF0ICR7c2VydmVyVXJsfWApO1xuICAgICAgICByZXNvbHZlKCk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIC8vIExhdW5jaCBicm93c2Vyc1xuICAgIGNvbnN0IGJyb3dzZXJUeXBlcyA9IFtcbiAgICAgIHsgbmFtZTogJ2Nocm9taXVtJywgbGF1bmNoZXI6IGNocm9taXVtIH0sXG4gICAgICB7IG5hbWU6ICdmaXJlZm94JywgbGF1bmNoZXI6IGZpcmVmb3ggfSxcbiAgICAgIHsgbmFtZTogJ3dlYmtpdCcsIGxhdW5jaGVyOiB3ZWJraXQgfVxuICAgIF07XG5cbiAgICBmb3IgKGNvbnN0IHsgbmFtZSwgbGF1bmNoZXIgfSBvZiBicm93c2VyVHlwZXMpIHtcbiAgICAgIGNvbnN0IGJyb3dzZXIgPSBhd2FpdCBsYXVuY2hlci5sYXVuY2goe1xuICAgICAgICBoZWFkbGVzczogdHJ1ZSxcbiAgICAgICAgYXJnczogbmFtZSA9PT0gJ2Nocm9taXVtJyA/IFsnLS1lbmFibGUtdW5zYWZlLXdlYmdwdSddIDogW11cbiAgICAgIH0pO1xuICAgICAgYnJvd3NlcnMucHVzaCh7IG5hbWUsIGJyb3dzZXIgfSk7XG4gICAgfVxuICB9KTtcblxuICBhZnRlckFsbChhc3luYyAoKSA9PiB7XG4gICAgLy8gQ2xvc2UgYWxsIGJyb3dzZXJzXG4gICAgZm9yIChjb25zdCB7IGJyb3dzZXIgfSBvZiBicm93c2Vycykge1xuICAgICAgYXdhaXQgYnJvd3Nlci5jbG9zZSgpO1xuICAgIH1cblxuICAgIC8vIENsb3NlIHNlcnZlclxuICAgIGF3YWl0IG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG4gICAgICBzZXJ2ZXIuY2xvc2UocmVzb2x2ZSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdCYXNpYyBXQVNNIFN1cHBvcnQnLCAoKSA9PiB7XG4gICAgZm9yIChjb25zdCB7IG5hbWUsIGJyb3dzZXIgfSBvZiBicm93c2Vycykge1xuICAgICAgaXQoYHNob3VsZCBkZXRlY3QgV0FTTSBzdXBwb3J0IGluICR7bmFtZX1gLCBhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGNvbnRleHQgPSBhd2FpdCBicm93c2VyLm5ld0NvbnRleHQoKTtcbiAgICAgICAgY29uc3QgcGFnZSA9IGF3YWl0IGNvbnRleHQubmV3UGFnZSgpO1xuXG4gICAgICAgIGF3YWl0IHBhZ2UuZ290byhgJHtzZXJ2ZXJVcmx9L3Rlc3QvYnJvd3Nlci93YXNtLXRlc3QuaHRtbGApO1xuXG4gICAgICAgIGNvbnN0IHdhc21TdXBwb3J0ZWQgPSBhd2FpdCBwYWdlLmV2YWx1YXRlKCgpID0+IHtcbiAgICAgICAgICByZXR1cm4gdHlwZW9mIFdlYkFzc2VtYmx5ICE9PSAndW5kZWZpbmVkJyAmJlxuICAgICAgICAgICAgICAgICB0eXBlb2YgV2ViQXNzZW1ibHkuaW5zdGFudGlhdGUgPT09ICdmdW5jdGlvbic7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGV4cGVjdCh3YXNtU3VwcG9ydGVkKS50b0JlKHRydWUpO1xuXG4gICAgICAgIGF3YWl0IGNvbnRleHQuY2xvc2UoKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdChgc2hvdWxkIGxvYWQgV0FTTSBtb2R1bGUgaW4gJHtuYW1lfWAsIGFzeW5jICgpID0+IHtcbiAgICAgICAgY29uc3QgY29udGV4dCA9IGF3YWl0IGJyb3dzZXIubmV3Q29udGV4dCgpO1xuICAgICAgICBjb25zdCBwYWdlID0gYXdhaXQgY29udGV4dC5uZXdQYWdlKCk7XG5cbiAgICAgICAgYXdhaXQgcGFnZS5nb3RvKGAke3NlcnZlclVybH0vdGVzdC9icm93c2VyL3dhc20tdGVzdC5odG1sYCk7XG5cbiAgICAgICAgY29uc3QgbW9kdWxlTG9hZGVkID0gYXdhaXQgcGFnZS5ldmFsdWF0ZShhc3luYyAoKSA9PiB7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goJy93YXNtL3J1dl9zd2FybV93YXNtX2JnLndhc20nKTtcbiAgICAgICAgICAgIGNvbnN0IGJ1ZmZlciA9IGF3YWl0IHJlc3BvbnNlLmFycmF5QnVmZmVyKCk7XG4gICAgICAgICAgICBjb25zdCBtb2R1bGUgPSBhd2FpdCBXZWJBc3NlbWJseS5jb21waWxlKGJ1ZmZlcik7XG4gICAgICAgICAgICByZXR1cm4gbW9kdWxlIGluc3RhbmNlb2YgV2ViQXNzZW1ibHkuTW9kdWxlO1xuICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdXQVNNIGxvYWQgZXJyb3I6JywgZXJyb3IpO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgZXhwZWN0KG1vZHVsZUxvYWRlZCkudG9CZSh0cnVlKTtcblxuICAgICAgICBhd2FpdCBjb250ZXh0LmNsb3NlKCk7XG4gICAgICB9KTtcbiAgICB9XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdTSU1EIFN1cHBvcnQnLCAoKSA9PiB7XG4gICAgZm9yIChjb25zdCB7IG5hbWUsIGJyb3dzZXIgfSBvZiBicm93c2Vycykge1xuICAgICAgaXQoYHNob3VsZCBkZXRlY3QgU0lNRCBzdXBwb3J0IGluICR7bmFtZX1gLCBhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGNvbnRleHQgPSBhd2FpdCBicm93c2VyLm5ld0NvbnRleHQoKTtcbiAgICAgICAgY29uc3QgcGFnZSA9IGF3YWl0IGNvbnRleHQubmV3UGFnZSgpO1xuXG4gICAgICAgIGF3YWl0IHBhZ2UuZ290byhgJHtzZXJ2ZXJVcmx9L3Rlc3QvYnJvd3Nlci93YXNtLXRlc3QuaHRtbGApO1xuXG4gICAgICAgIGNvbnN0IHNpbWRJbmZvID0gYXdhaXQgcGFnZS5ldmFsdWF0ZShhc3luYyAoKSA9PiB7XG4gICAgICAgICAgLy8gTG9hZCBSdXZTd2FybSBtb2R1bGVcbiAgICAgICAgICBjb25zdCB7IFJ1dlN3YXJtIH0gPSBhd2FpdCBpbXBvcnQoJy9zcmMvaW5kZXgtZW5oYW5jZWQuanMnKTtcbiAgICAgICAgICBjb25zdCBzd2FybSA9IGF3YWl0IFJ1dlN3YXJtLmluaXRpYWxpemUoeyBkZWJ1ZzogdHJ1ZSB9KTtcbiAgICAgICAgICBcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgc2ltZERldGVjdGVkOiBzd2FybS5mZWF0dXJlcy5zaW1kLFxuICAgICAgICAgICAgc2ltZEluV2FzbTogYXdhaXQgc3dhcm0ud2FzbUxvYWRlci5kZXRlY3RTSU1EU3VwcG9ydCgpXG4gICAgICAgICAgfTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc29sZS5sb2coYCR7bmFtZX0gU0lNRCBzdXBwb3J0OmAsIHNpbWRJbmZvKTtcblxuICAgICAgICAvLyBTSU1EIGlzIG9wdGlvbmFsLCBzbyB3ZSBqdXN0IGxvZyB0aGUgcmVzdWx0XG4gICAgICAgIGlmIChzaW1kSW5mby5zaW1kRGV0ZWN0ZWQpIHtcbiAgICAgICAgICBleHBlY3Qoc2ltZEluZm8uc2ltZEluV2FzbSkudG9CZSh0cnVlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGF3YWl0IGNvbnRleHQuY2xvc2UoKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ01lbW9yeSBNYW5hZ2VtZW50JywgKCkgPT4ge1xuICAgIGZvciAoY29uc3QgeyBuYW1lLCBicm93c2VyIH0gb2YgYnJvd3NlcnMpIHtcbiAgICAgIGl0KGBzaG91bGQgaGFuZGxlIFNoYXJlZEFycmF5QnVmZmVyIGluICR7bmFtZX1gLCBhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGNvbnRleHQgPSBhd2FpdCBicm93c2VyLm5ld0NvbnRleHQoKTtcbiAgICAgICAgY29uc3QgcGFnZSA9IGF3YWl0IGNvbnRleHQubmV3UGFnZSgpO1xuXG4gICAgICAgIGF3YWl0IHBhZ2UuZ290byhgJHtzZXJ2ZXJVcmx9L3Rlc3QvYnJvd3Nlci93YXNtLXRlc3QuaHRtbGApO1xuXG4gICAgICAgIGNvbnN0IHNoYXJlZE1lbW9yeVRlc3QgPSBhd2FpdCBwYWdlLmV2YWx1YXRlKCgpID0+IHtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gQ2hlY2sgaWYgU2hhcmVkQXJyYXlCdWZmZXIgaXMgYXZhaWxhYmxlXG4gICAgICAgICAgICBpZiAodHlwZW9mIFNoYXJlZEFycmF5QnVmZmVyID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICByZXR1cm4geyBhdmFpbGFibGU6IGZhbHNlLCByZWFzb246ICdTaGFyZWRBcnJheUJ1ZmZlciBub3QgZGVmaW5lZCcgfTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gVHJ5IHRvIGNyZWF0ZSBvbmVcbiAgICAgICAgICAgIGNvbnN0IGJ1ZmZlciA9IG5ldyBTaGFyZWRBcnJheUJ1ZmZlcigxMDI0KTtcbiAgICAgICAgICAgIGNvbnN0IHZpZXcgPSBuZXcgSW50MzJBcnJheShidWZmZXIpO1xuICAgICAgICAgICAgdmlld1swXSA9IDQyO1xuXG4gICAgICAgICAgICAvLyBUZXN0IEF0b21pY3MgaWYgYXZhaWxhYmxlXG4gICAgICAgICAgICBpZiAodHlwZW9mIEF0b21pY3MgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgIEF0b21pY3Muc3RvcmUodmlldywgMCwgMTIzKTtcbiAgICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBBdG9taWNzLmxvYWQodmlldywgMCk7XG4gICAgICAgICAgICAgIHJldHVybiB7IFxuICAgICAgICAgICAgICAgIGF2YWlsYWJsZTogdHJ1ZSwgXG4gICAgICAgICAgICAgICAgYXRvbWljc1N1cHBvcnRlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICB0ZXN0VmFsdWU6IHZhbHVlIFxuICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4geyBhdmFpbGFibGU6IHRydWUsIGF0b21pY3NTdXBwb3J0ZWQ6IGZhbHNlIH07XG4gICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIHJldHVybiB7IFxuICAgICAgICAgICAgICBhdmFpbGFibGU6IGZhbHNlLCBcbiAgICAgICAgICAgICAgcmVhc29uOiBlcnJvci5tZXNzYWdlIFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnNvbGUubG9nKGAke25hbWV9IFNoYXJlZEFycmF5QnVmZmVyOmAsIHNoYXJlZE1lbW9yeVRlc3QpO1xuXG4gICAgICAgIC8vIFNoYXJlZEFycmF5QnVmZmVyIHJlcXVpcmVzIHNwZWNpZmljIGhlYWRlcnMsIG1heSBub3QgYmUgYXZhaWxhYmxlXG4gICAgICAgIGlmIChzaGFyZWRNZW1vcnlUZXN0LmF2YWlsYWJsZSAmJiBzaGFyZWRNZW1vcnlUZXN0LmF0b21pY3NTdXBwb3J0ZWQpIHtcbiAgICAgICAgICBleHBlY3Qoc2hhcmVkTWVtb3J5VGVzdC50ZXN0VmFsdWUpLnRvQmUoMTIzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGF3YWl0IGNvbnRleHQuY2xvc2UoKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdChgc2hvdWxkIGhhbmRsZSBtZW1vcnkgZ3Jvd3RoIGluICR7bmFtZX1gLCBhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGNvbnRleHQgPSBhd2FpdCBicm93c2VyLm5ld0NvbnRleHQoKTtcbiAgICAgICAgY29uc3QgcGFnZSA9IGF3YWl0IGNvbnRleHQubmV3UGFnZSgpO1xuXG4gICAgICAgIGF3YWl0IHBhZ2UuZ290byhgJHtzZXJ2ZXJVcmx9L3Rlc3QvYnJvd3Nlci93YXNtLXRlc3QuaHRtbGApO1xuXG4gICAgICAgIGNvbnN0IG1lbW9yeVRlc3QgPSBhd2FpdCBwYWdlLmV2YWx1YXRlKGFzeW5jICgpID0+IHtcbiAgICAgICAgICBjb25zdCB7IFJ1dlN3YXJtIH0gPSBhd2FpdCBpbXBvcnQoJy9zcmMvaW5kZXgtZW5oYW5jZWQuanMnKTtcbiAgICAgICAgICBjb25zdCBzd2FybSA9IGF3YWl0IFJ1dlN3YXJtLmluaXRpYWxpemUoeyBkZWJ1ZzogZmFsc2UgfSk7XG5cbiAgICAgICAgICBjb25zdCBpbml0aWFsTWVtb3J5ID0gc3dhcm0ud2FzbUxvYWRlci5nZXRNZW1vcnlTaXplKCk7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gQWxsb2NhdGUgbGFyZ2UgYW1vdW50IG9mIG1lbW9yeVxuICAgICAgICAgIGNvbnN0IGFsbG9jYXRpb25zID0gW107XG4gICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAxMDsgaSsrKSB7XG4gICAgICAgICAgICBjb25zdCBkYXRhID0gbmV3IEZsb2F0MzJBcnJheSgxMDAwMDApOyAvLyB+NDAwS0IgZWFjaFxuICAgICAgICAgICAgYWxsb2NhdGlvbnMucHVzaChhd2FpdCBzd2FybS53YXNtTG9hZGVyLmFsbG9jYXRlQW5kU3RvcmUoZGF0YSkpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGNvbnN0IGFmdGVyQWxsb2NNZW1vcnkgPSBzd2FybS53YXNtTG9hZGVyLmdldE1lbW9yeVNpemUoKTtcblxuICAgICAgICAgIC8vIENsZWFuIHVwXG4gICAgICAgICAgZm9yIChjb25zdCBwdHIgb2YgYWxsb2NhdGlvbnMpIHtcbiAgICAgICAgICAgIGF3YWl0IHN3YXJtLndhc21Mb2FkZXIuZGVhbGxvY2F0ZShwdHIpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBpbml0aWFsOiBpbml0aWFsTWVtb3J5LFxuICAgICAgICAgICAgYWZ0ZXJBbGxvYzogYWZ0ZXJBbGxvY01lbW9yeSxcbiAgICAgICAgICAgIGdyZXc6IGFmdGVyQWxsb2NNZW1vcnkgPiBpbml0aWFsTWVtb3J5XG4gICAgICAgICAgfTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgZXhwZWN0KG1lbW9yeVRlc3QuZ3JldykudG9CZSh0cnVlKTtcbiAgICAgICAgY29uc29sZS5sb2coYCR7bmFtZX0gbWVtb3J5IGdyb3d0aDogJHttZW1vcnlUZXN0LmluaXRpYWx9IC0+ICR7bWVtb3J5VGVzdC5hZnRlckFsbG9jfWApO1xuXG4gICAgICAgIGF3YWl0IGNvbnRleHQuY2xvc2UoKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ05ldXJhbCBOZXR3b3JrIE9wZXJhdGlvbnMnLCAoKSA9PiB7XG4gICAgZm9yIChjb25zdCB7IG5hbWUsIGJyb3dzZXIgfSBvZiBicm93c2Vycykge1xuICAgICAgaXQoYHNob3VsZCBydW4gbmV1cmFsIG5ldHdvcmsgaW4gJHtuYW1lfWAsIGFzeW5jICgpID0+IHtcbiAgICAgICAgY29uc3QgY29udGV4dCA9IGF3YWl0IGJyb3dzZXIubmV3Q29udGV4dCgpO1xuICAgICAgICBjb25zdCBwYWdlID0gYXdhaXQgY29udGV4dC5uZXdQYWdlKCk7XG5cbiAgICAgICAgYXdhaXQgcGFnZS5nb3RvKGAke3NlcnZlclVybH0vdGVzdC9icm93c2VyL3dhc20tdGVzdC5odG1sYCk7XG5cbiAgICAgICAgY29uc3Qgbm5UZXN0ID0gYXdhaXQgcGFnZS5ldmFsdWF0ZShhc3luYyAoKSA9PiB7XG4gICAgICAgICAgY29uc3QgeyBSdXZTd2FybSB9ID0gYXdhaXQgaW1wb3J0KCcvc3JjL2luZGV4LWVuaGFuY2VkLmpzJyk7XG4gICAgICAgICAgY29uc3Qgc3dhcm0gPSBhd2FpdCBSdXZTd2FybS5pbml0aWFsaXplKHsgXG4gICAgICAgICAgICBlbmFibGVOZXVyYWxOZXR3b3JrczogdHJ1ZSxcbiAgICAgICAgICAgIGRlYnVnOiBmYWxzZSBcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIC8vIENyZWF0ZSBzaW1wbGUgbmV1cmFsIG5ldHdvcmtcbiAgICAgICAgICBjb25zdCBuZXR3b3JrID0gYXdhaXQgc3dhcm0ubmV1cmFsTWFuYWdlci5jcmVhdGVOZXR3b3JrKHtcbiAgICAgICAgICAgIHR5cGU6ICdtbHAnLFxuICAgICAgICAgICAgbGF5ZXJzOiBbXG4gICAgICAgICAgICAgIHsgdW5pdHM6IDEwLCBhY3RpdmF0aW9uOiAncmVsdScgfSxcbiAgICAgICAgICAgICAgeyB1bml0czogNSwgYWN0aXZhdGlvbjogJ3NvZnRtYXgnIH1cbiAgICAgICAgICAgIF1cbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIC8vIFJ1biBpbmZlcmVuY2VcbiAgICAgICAgICBjb25zdCBpbnB1dCA9IG5ldyBGbG9hdDMyQXJyYXkoMTApLmZpbGwoMC41KTtcbiAgICAgICAgICBjb25zdCBzdGFydFRpbWUgPSBwZXJmb3JtYW5jZS5ub3coKTtcbiAgICAgICAgICBjb25zdCBvdXRwdXQgPSBhd2FpdCBuZXR3b3JrLnByZWRpY3QoaW5wdXQpO1xuICAgICAgICAgIGNvbnN0IGluZmVyZW5jZVRpbWUgPSBwZXJmb3JtYW5jZS5ub3coKSAtIHN0YXJ0VGltZTtcblxuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICAgICAgb3V0cHV0TGVuZ3RoOiBvdXRwdXQubGVuZ3RoLFxuICAgICAgICAgICAgaW5mZXJlbmNlVGltZSxcbiAgICAgICAgICAgIG91dHB1dFN1bTogQXJyYXkuZnJvbShvdXRwdXQpLnJlZHVjZSgoYSwgYikgPT4gYSArIGIsIDApXG4gICAgICAgICAgfTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgZXhwZWN0KG5uVGVzdC5zdWNjZXNzKS50b0JlKHRydWUpO1xuICAgICAgICBleHBlY3Qobm5UZXN0Lm91dHB1dExlbmd0aCkudG9CZSg1KTtcbiAgICAgICAgZXhwZWN0KG5uVGVzdC5vdXRwdXRTdW0pLnRvQmVDbG9zZVRvKDEuMCwgMSk7IC8vIFNvZnRtYXggc2hvdWxkIHN1bSB0byB+MVxuICAgICAgICBjb25zb2xlLmxvZyhgJHtuYW1lfSBOTiBpbmZlcmVuY2UgdGltZTogJHtublRlc3QuaW5mZXJlbmNlVGltZS50b0ZpeGVkKDIpfW1zYCk7XG5cbiAgICAgICAgYXdhaXQgY29udGV4dC5jbG9zZSgpO1xuICAgICAgfSk7XG4gICAgfVxuICB9KTtcblxuICBkZXNjcmliZSgnU3dhcm0gT3BlcmF0aW9ucycsICgpID0+IHtcbiAgICBmb3IgKGNvbnN0IHsgbmFtZSwgYnJvd3NlciB9IG9mIGJyb3dzZXJzKSB7XG4gICAgICBpdChgc2hvdWxkIGNyZWF0ZSBhbmQgbWFuYWdlIHN3YXJtIGluICR7bmFtZX1gLCBhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGNvbnRleHQgPSBhd2FpdCBicm93c2VyLm5ld0NvbnRleHQoKTtcbiAgICAgICAgY29uc3QgcGFnZSA9IGF3YWl0IGNvbnRleHQubmV3UGFnZSgpO1xuXG4gICAgICAgIGF3YWl0IHBhZ2UuZ290byhgJHtzZXJ2ZXJVcmx9L3Rlc3QvYnJvd3Nlci93YXNtLXRlc3QuaHRtbGApO1xuXG4gICAgICAgIGNvbnN0IHN3YXJtVGVzdCA9IGF3YWl0IHBhZ2UuZXZhbHVhdGUoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgIGNvbnN0IHsgUnV2U3dhcm0gfSA9IGF3YWl0IGltcG9ydCgnL3NyYy9pbmRleC1lbmhhbmNlZC5qcycpO1xuICAgICAgICAgIGNvbnN0IHJ1dlN3YXJtID0gYXdhaXQgUnV2U3dhcm0uaW5pdGlhbGl6ZSh7IGRlYnVnOiBmYWxzZSB9KTtcblxuICAgICAgICAgIC8vIENyZWF0ZSBzd2FybVxuICAgICAgICAgIGNvbnN0IHN3YXJtID0gYXdhaXQgcnV2U3dhcm0uY3JlYXRlU3dhcm0oe1xuICAgICAgICAgICAgbmFtZTogJ2Jyb3dzZXItdGVzdC1zd2FybScsXG4gICAgICAgICAgICB0b3BvbG9neTogJ21lc2gnLFxuICAgICAgICAgICAgbWF4QWdlbnRzOiA1XG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICAvLyBTcGF3biBhZ2VudHNcbiAgICAgICAgICBjb25zdCBhZ2VudHMgPSBbXTtcbiAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDM7IGkrKykge1xuICAgICAgICAgICAgY29uc3QgYWdlbnQgPSBhd2FpdCBzd2FybS5zcGF3bih7XG4gICAgICAgICAgICAgIHR5cGU6IFsncmVzZWFyY2hlcicsICdjb2RlcicsICdhbmFseXN0J11baV1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgYWdlbnRzLnB1c2goe1xuICAgICAgICAgICAgICBpZDogYWdlbnQuaWQsXG4gICAgICAgICAgICAgIHR5cGU6IGFnZW50LnR5cGUsXG4gICAgICAgICAgICAgIHN0YXR1czogYWdlbnQuc3RhdHVzXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBFeGVjdXRlIHRhc2tcbiAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBzd2FybS5vcmNoZXN0cmF0ZSh7XG4gICAgICAgICAgICB0YXNrOiAndGVzdC10YXNrJyxcbiAgICAgICAgICAgIHN0cmF0ZWd5OiAncGFyYWxsZWwnXG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgc3dhcm1DcmVhdGVkOiB0cnVlLFxuICAgICAgICAgICAgYWdlbnRDb3VudDogYWdlbnRzLmxlbmd0aCxcbiAgICAgICAgICAgIGFnZW50cyxcbiAgICAgICAgICAgIHRhc2tDb21wbGV0ZWQ6IHJlc3VsdC5jb21wbGV0ZWRcbiAgICAgICAgICB9O1xuICAgICAgICB9KTtcblxuICAgICAgICBleHBlY3Qoc3dhcm1UZXN0LnN3YXJtQ3JlYXRlZCkudG9CZSh0cnVlKTtcbiAgICAgICAgZXhwZWN0KHN3YXJtVGVzdC5hZ2VudENvdW50KS50b0JlKDMpO1xuICAgICAgICBleHBlY3Qoc3dhcm1UZXN0LnRhc2tDb21wbGV0ZWQpLnRvQmUodHJ1ZSk7XG5cbiAgICAgICAgYXdhaXQgY29udGV4dC5jbG9zZSgpO1xuICAgICAgfSk7XG4gICAgfVxuICB9KTtcblxuICBkZXNjcmliZSgnUGVyZm9ybWFuY2UgQ2hhcmFjdGVyaXN0aWNzJywgKCkgPT4ge1xuICAgIGZvciAoY29uc3QgeyBuYW1lLCBicm93c2VyIH0gb2YgYnJvd3NlcnMpIHtcbiAgICAgIGl0KGBzaG91bGQgbWVhc3VyZSBXQVNNIHBlcmZvcm1hbmNlIGluICR7bmFtZX1gLCBhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGNvbnRleHQgPSBhd2FpdCBicm93c2VyLm5ld0NvbnRleHQoKTtcbiAgICAgICAgY29uc3QgcGFnZSA9IGF3YWl0IGNvbnRleHQubmV3UGFnZSgpO1xuXG4gICAgICAgIGF3YWl0IHBhZ2UuZ290byhgJHtzZXJ2ZXJVcmx9L3Rlc3QvYnJvd3Nlci93YXNtLXRlc3QuaHRtbGApO1xuXG4gICAgICAgIGNvbnN0IHBlcmZUZXN0ID0gYXdhaXQgcGFnZS5ldmFsdWF0ZShhc3luYyAoKSA9PiB7XG4gICAgICAgICAgY29uc3QgeyBSdXZTd2FybSB9ID0gYXdhaXQgaW1wb3J0KCcvc3JjL2luZGV4LWVuaGFuY2VkLmpzJyk7XG4gICAgICAgICAgY29uc3Qgc3dhcm0gPSBhd2FpdCBSdXZTd2FybS5pbml0aWFsaXplKHsgXG4gICAgICAgICAgICB1c2VTSU1EOiB0cnVlLFxuICAgICAgICAgICAgZGVidWc6IGZhbHNlIFxuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgY29uc3QgYmVuY2htYXJrcyA9IHt9O1xuXG4gICAgICAgICAgLy8gQmVuY2htYXJrIDE6IFZlY3RvciBvcGVyYXRpb25zXG4gICAgICAgICAgY29uc3QgdmVjdG9yU2l6ZSA9IDEwMDAwMDtcbiAgICAgICAgICBjb25zdCBhID0gbmV3IEZsb2F0MzJBcnJheSh2ZWN0b3JTaXplKS5maWxsKDEuMCk7XG4gICAgICAgICAgY29uc3QgYiA9IG5ldyBGbG9hdDMyQXJyYXkodmVjdG9yU2l6ZSkuZmlsbCgyLjApO1xuXG4gICAgICAgICAgY29uc3QgdmVjdG9yU3RhcnQgPSBwZXJmb3JtYW5jZS5ub3coKTtcbiAgICAgICAgICBjb25zdCB2ZWN0b3JSZXN1bHQgPSBhd2FpdCBzd2FybS53YXNtTG9hZGVyLnZlY3RvckFkZChhLCBiKTtcbiAgICAgICAgICBiZW5jaG1hcmtzLnZlY3Rvck9wcyA9IHBlcmZvcm1hbmNlLm5vdygpIC0gdmVjdG9yU3RhcnQ7XG5cbiAgICAgICAgICAvLyBCZW5jaG1hcmsgMjogTWF0cml4IG11bHRpcGxpY2F0aW9uXG4gICAgICAgICAgY29uc3QgbWF0cml4U2l6ZSA9IDEwMDtcbiAgICAgICAgICBjb25zdCBtYXRBID0gbmV3IEZsb2F0MzJBcnJheShtYXRyaXhTaXplICogbWF0cml4U2l6ZSkuZmlsbCgxLjApO1xuICAgICAgICAgIGNvbnN0IG1hdEIgPSBuZXcgRmxvYXQzMkFycmF5KG1hdHJpeFNpemUgKiBtYXRyaXhTaXplKS5maWxsKDIuMCk7XG5cbiAgICAgICAgICBjb25zdCBtYXRyaXhTdGFydCA9IHBlcmZvcm1hbmNlLm5vdygpO1xuICAgICAgICAgIGNvbnN0IG1hdHJpeFJlc3VsdCA9IGF3YWl0IHN3YXJtLndhc21Mb2FkZXIubWF0cml4TXVsdGlwbHkoXG4gICAgICAgICAgICBtYXRBLCBtYXRCLCBtYXRyaXhTaXplLCBtYXRyaXhTaXplLCBtYXRyaXhTaXplXG4gICAgICAgICAgKTtcbiAgICAgICAgICBiZW5jaG1hcmtzLm1hdHJpeE9wcyA9IHBlcmZvcm1hbmNlLm5vdygpIC0gbWF0cml4U3RhcnQ7XG5cbiAgICAgICAgICAvLyBCZW5jaG1hcmsgMzogTmV1cmFsIG5ldHdvcmtcbiAgICAgICAgICBjb25zdCBuZXR3b3JrID0gYXdhaXQgc3dhcm0ubmV1cmFsTWFuYWdlci5jcmVhdGVOZXR3b3JrKHtcbiAgICAgICAgICAgIHR5cGU6ICdtbHAnLFxuICAgICAgICAgICAgbGF5ZXJzOiBbXG4gICAgICAgICAgICAgIHsgdW5pdHM6IDEwMCwgYWN0aXZhdGlvbjogJ3JlbHUnIH0sXG4gICAgICAgICAgICAgIHsgdW5pdHM6IDUwLCBhY3RpdmF0aW9uOiAncmVsdScgfSxcbiAgICAgICAgICAgICAgeyB1bml0czogMTAsIGFjdGl2YXRpb246ICdzb2Z0bWF4JyB9XG4gICAgICAgICAgICBdXG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICBjb25zdCBubklucHV0ID0gbmV3IEZsb2F0MzJBcnJheSgxMDApLmZpbGwoMC41KTtcbiAgICAgICAgICBjb25zdCBpdGVyYXRpb25zID0gMTAwO1xuXG4gICAgICAgICAgY29uc3Qgbm5TdGFydCA9IHBlcmZvcm1hbmNlLm5vdygpO1xuICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaXRlcmF0aW9uczsgaSsrKSB7XG4gICAgICAgICAgICBhd2FpdCBuZXR3b3JrLnByZWRpY3Qobm5JbnB1dCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGJlbmNobWFya3Mubm5JbmZlcmVuY2UgPSAocGVyZm9ybWFuY2Uubm93KCkgLSBublN0YXJ0KSAvIGl0ZXJhdGlvbnM7XG5cbiAgICAgICAgICByZXR1cm4gYmVuY2htYXJrcztcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc29sZS5sb2coYCR7bmFtZX0gUGVyZm9ybWFuY2UgQmVuY2htYXJrczpgKTtcbiAgICAgICAgY29uc29sZS5sb2coYCAgVmVjdG9yIG9wcyAoMTAwayBlbGVtZW50cyk6ICR7cGVyZlRlc3QudmVjdG9yT3BzLnRvRml4ZWQoMil9bXNgKTtcbiAgICAgICAgY29uc29sZS5sb2coYCAgTWF0cml4IG11bHQgKDEwMHgxMDApOiAke3BlcmZUZXN0Lm1hdHJpeE9wcy50b0ZpeGVkKDIpfW1zYCk7XG4gICAgICAgIGNvbnNvbGUubG9nKGAgIE5OIGluZmVyZW5jZSAoYXZnKTogJHtwZXJmVGVzdC5ubkluZmVyZW5jZS50b0ZpeGVkKDIpfW1zYCk7XG5cbiAgICAgICAgLy8gUGVyZm9ybWFuY2Ugc2hvdWxkIGJlIHJlYXNvbmFibGUgYWNyb3NzIGJyb3dzZXJzXG4gICAgICAgIGV4cGVjdChwZXJmVGVzdC52ZWN0b3JPcHMpLnRvQmVMZXNzVGhhbig1MCk7XG4gICAgICAgIGV4cGVjdChwZXJmVGVzdC5tYXRyaXhPcHMpLnRvQmVMZXNzVGhhbigxMDApO1xuICAgICAgICBleHBlY3QocGVyZlRlc3Qubm5JbmZlcmVuY2UpLnRvQmVMZXNzVGhhbig1KTtcblxuICAgICAgICBhd2FpdCBjb250ZXh0LmNsb3NlKCk7XG4gICAgICB9KTtcbiAgICB9XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdFcnJvciBIYW5kbGluZycsICgpID0+IHtcbiAgICBmb3IgKGNvbnN0IHsgbmFtZSwgYnJvd3NlciB9IG9mIGJyb3dzZXJzKSB7XG4gICAgICBpdChgc2hvdWxkIGhhbmRsZSBXQVNNIGVycm9ycyBncmFjZWZ1bGx5IGluICR7bmFtZX1gLCBhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGNvbnRleHQgPSBhd2FpdCBicm93c2VyLm5ld0NvbnRleHQoKTtcbiAgICAgICAgY29uc3QgcGFnZSA9IGF3YWl0IGNvbnRleHQubmV3UGFnZSgpO1xuXG4gICAgICAgIGF3YWl0IHBhZ2UuZ290byhgJHtzZXJ2ZXJVcmx9L3Rlc3QvYnJvd3Nlci93YXNtLXRlc3QuaHRtbGApO1xuXG4gICAgICAgIGNvbnN0IGVycm9yVGVzdCA9IGF3YWl0IHBhZ2UuZXZhbHVhdGUoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgIGNvbnN0IHsgUnV2U3dhcm0gfSA9IGF3YWl0IGltcG9ydCgnL3NyYy9pbmRleC1lbmhhbmNlZC5qcycpO1xuICAgICAgICAgIGNvbnN0IHN3YXJtID0gYXdhaXQgUnV2U3dhcm0uaW5pdGlhbGl6ZSh7IGRlYnVnOiBmYWxzZSB9KTtcblxuICAgICAgICAgIGNvbnN0IGVycm9ycyA9IFtdO1xuXG4gICAgICAgICAgLy8gVGVzdCAxOiBJbnZhbGlkIGFnZW50IHR5cGVcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgYXdhaXQgc3dhcm0uY3JlYXRlU3dhcm0oeyBuYW1lOiAndGVzdCcgfSlcbiAgICAgICAgICAgICAgLnRoZW4ocyA9PiBzLnNwYXduKHsgdHlwZTogJ2ludmFsaWQtdHlwZScgfSkpO1xuICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBlcnJvcnMucHVzaCh7XG4gICAgICAgICAgICAgIHRlc3Q6ICdpbnZhbGlkLWFnZW50LXR5cGUnLFxuICAgICAgICAgICAgICBjYXVnaHQ6IHRydWUsXG4gICAgICAgICAgICAgIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2VcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIFRlc3QgMjogTWVtb3J5IGFsbG9jYXRpb24gZmFpbHVyZVxuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICBhd2FpdCBzd2FybS53YXNtTG9hZGVyLmFsbG9jYXRlKE51bWJlci5NQVhfU0FGRV9JTlRFR0VSKTtcbiAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgZXJyb3JzLnB1c2goe1xuICAgICAgICAgICAgICB0ZXN0OiAnbWVtb3J5LWFsbG9jYXRpb24nLFxuICAgICAgICAgICAgICBjYXVnaHQ6IHRydWUsXG4gICAgICAgICAgICAgIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2VcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIFRlc3QgMzogSW52YWxpZCBuZXVyYWwgbmV0d29yayBjb25maWdcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgYXdhaXQgc3dhcm0ubmV1cmFsTWFuYWdlci5jcmVhdGVOZXR3b3JrKHtcbiAgICAgICAgICAgICAgdHlwZTogJ2ludmFsaWQnLFxuICAgICAgICAgICAgICBsYXllcnM6IFtdXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgZXJyb3JzLnB1c2goe1xuICAgICAgICAgICAgICB0ZXN0OiAnaW52YWxpZC1uZXR3b3JrJyxcbiAgICAgICAgICAgICAgY2F1Z2h0OiB0cnVlLFxuICAgICAgICAgICAgICBtZXNzYWdlOiBlcnJvci5tZXNzYWdlXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICByZXR1cm4gZXJyb3JzO1xuICAgICAgICB9KTtcblxuICAgICAgICBleHBlY3QoZXJyb3JUZXN0KS50b0hhdmVMZW5ndGgoMyk7XG4gICAgICAgIGVycm9yVGVzdC5mb3JFYWNoKGVycm9yID0+IHtcbiAgICAgICAgICBleHBlY3QoZXJyb3IuY2F1Z2h0KS50b0JlKHRydWUpO1xuICAgICAgICAgIGV4cGVjdChlcnJvci5tZXNzYWdlKS50b0JlVHJ1dGh5KCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGF3YWl0IGNvbnRleHQuY2xvc2UoKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1dlYldvcmtlciBJbnRlZ3JhdGlvbicsICgpID0+IHtcbiAgICBmb3IgKGNvbnN0IHsgbmFtZSwgYnJvd3NlciB9IG9mIGJyb3dzZXJzKSB7XG4gICAgICBpdChgc2hvdWxkIHJ1biBXQVNNIGluIFdlYldvcmtlciBpbiAke25hbWV9YCwgYXN5bmMgKCkgPT4ge1xuICAgICAgICBjb25zdCBjb250ZXh0ID0gYXdhaXQgYnJvd3Nlci5uZXdDb250ZXh0KCk7XG4gICAgICAgIGNvbnN0IHBhZ2UgPSBhd2FpdCBjb250ZXh0Lm5ld1BhZ2UoKTtcblxuICAgICAgICBhd2FpdCBwYWdlLmdvdG8oYCR7c2VydmVyVXJsfS90ZXN0L2Jyb3dzZXIvd2FzbS10ZXN0Lmh0bWxgKTtcblxuICAgICAgICBjb25zdCB3b3JrZXJUZXN0ID0gYXdhaXQgcGFnZS5ldmFsdWF0ZShhc3luYyAoKSA9PiB7XG4gICAgICAgICAgLy8gQ3JlYXRlIHdvcmtlciBzY3JpcHRcbiAgICAgICAgICBjb25zdCB3b3JrZXJTY3JpcHQgPSBgXG4gICAgICAgICAgICBpbXBvcnRTY3JpcHRzKCcvc3JjL2luZGV4LmpzJyk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHNlbGYub25tZXNzYWdlID0gYXN5bmMgKGUpID0+IHtcbiAgICAgICAgICAgICAgY29uc3QgeyBSdXZTd2FybSB9ID0gc2VsZjtcbiAgICAgICAgICAgICAgY29uc3Qgc3dhcm0gPSBhd2FpdCBSdXZTd2FybS5pbml0aWFsaXplKHsgZGVidWc6IGZhbHNlIH0pO1xuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgc3dhcm0ud2FzbUxvYWRlci52ZWN0b3JBZGQoXG4gICAgICAgICAgICAgICAgZS5kYXRhLmEsXG4gICAgICAgICAgICAgICAgZS5kYXRhLmJcbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIHNlbGYucG9zdE1lc3NhZ2UoeyByZXN1bHQ6IEFycmF5LmZyb20ocmVzdWx0KSB9KTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgYDtcblxuICAgICAgICAgIGNvbnN0IGJsb2IgPSBuZXcgQmxvYihbd29ya2VyU2NyaXB0XSwgeyB0eXBlOiAnYXBwbGljYXRpb24vamF2YXNjcmlwdCcgfSk7XG4gICAgICAgICAgY29uc3Qgd29ya2VyID0gbmV3IFdvcmtlcihVUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpKTtcblxuICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG4gICAgICAgICAgICB3b3JrZXIub25tZXNzYWdlID0gKGUpID0+IHJlc29sdmUoZS5kYXRhKTtcbiAgICAgICAgICAgIHdvcmtlci5wb3N0TWVzc2FnZSh7XG4gICAgICAgICAgICAgIGE6IG5ldyBGbG9hdDMyQXJyYXkoWzEsIDIsIDMsIDRdKSxcbiAgICAgICAgICAgICAgYjogbmV3IEZsb2F0MzJBcnJheShbNSwgNiwgNywgOF0pXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIHdvcmtlci50ZXJtaW5hdGUoKTtcblxuICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGV4cGVjdCh3b3JrZXJUZXN0LnJlc3VsdCkudG9FcXVhbChbNiwgOCwgMTAsIDEyXSk7XG5cbiAgICAgICAgYXdhaXQgY29udGV4dC5jbG9zZSgpO1xuICAgICAgfSk7XG4gICAgfVxuICB9KTtcbn0pO1xuXG4vLyBDcmVhdGUgdGVzdCBIVE1MIGZpbGVcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVUZXN0SFRNTCgpIHtcbiAgY29uc3QgaHRtbCA9IGA8IURPQ1RZUEUgaHRtbD5cbjxodG1sPlxuPGhlYWQ+XG4gICAgPG1ldGEgY2hhcnNldD1cIlVURi04XCI+XG4gICAgPHRpdGxlPldBU00gQnJvd3NlciBUZXN0PC90aXRsZT5cbiAgICA8bWV0YSBodHRwLWVxdWl2PVwiQ3Jvc3MtT3JpZ2luLUVtYmVkZGVyLVBvbGljeVwiIGNvbnRlbnQ9XCJyZXF1aXJlLWNvcnBcIj5cbiAgICA8bWV0YSBodHRwLWVxdWl2PVwiQ3Jvc3MtT3JpZ2luLU9wZW5lci1Qb2xpY3lcIiBjb250ZW50PVwic2FtZS1vcmlnaW5cIj5cbjwvaGVhZD5cbjxib2R5PlxuICAgIDxoMT5SdXZTd2FybSBXQVNNIEJyb3dzZXIgVGVzdDwvaDE+XG4gICAgPGRpdiBpZD1cInN0YXR1c1wiPkxvYWRpbmcuLi48L2Rpdj5cbiAgICA8ZGl2IGlkPVwicmVzdWx0c1wiPjwvZGl2PlxuICAgIFxuICAgIDxzY3JpcHQgdHlwZT1cIm1vZHVsZVwiPlxuICAgICAgICBpbXBvcnQgeyBSdXZTd2FybSB9IGZyb20gJy9zcmMvaW5kZXgtZW5oYW5jZWQuanMnO1xuICAgICAgICBcbiAgICAgICAgd2luZG93LlJ1dlN3YXJtID0gUnV2U3dhcm07XG4gICAgICAgIFxuICAgICAgICBhc3luYyBmdW5jdGlvbiBydW5UZXN0cygpIHtcbiAgICAgICAgICAgIGNvbnN0IHN0YXR1cyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzdGF0dXMnKTtcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdHMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVzdWx0cycpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHN0YXR1cy50ZXh0Q29udGVudCA9ICdJbml0aWFsaXppbmcgUnV2U3dhcm0uLi4nO1xuICAgICAgICAgICAgICAgIGNvbnN0IHN3YXJtID0gYXdhaXQgUnV2U3dhcm0uaW5pdGlhbGl6ZSh7XG4gICAgICAgICAgICAgICAgICAgIGRlYnVnOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBlbmFibGVOZXVyYWxOZXR3b3JrczogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgdXNlU0lNRDogdHJ1ZVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHN0YXR1cy50ZXh0Q29udGVudCA9ICdSdXZTd2FybSBpbml0aWFsaXplZCBzdWNjZXNzZnVsbHkhJztcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBEaXNwbGF5IGZlYXR1cmVzXG4gICAgICAgICAgICAgICAgcmVzdWx0cy5pbm5lckhUTUwgPSBcXGBcbiAgICAgICAgICAgICAgICAgICAgPGgyPkRldGVjdGVkIEZlYXR1cmVzOjwvaDI+XG4gICAgICAgICAgICAgICAgICAgIDx1bD5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxsaT5XQVNNIFN1cHBvcnQ6IOKckzwvbGk+XG4gICAgICAgICAgICAgICAgICAgICAgICA8bGk+U0lNRCBTdXBwb3J0OiBcXCR7c3dhcm0uZmVhdHVyZXMuc2ltZCA/ICfinJMnIDogJ+Kclyd9PC9saT5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxsaT5TaGFyZWRBcnJheUJ1ZmZlcjogXFwke3R5cGVvZiBTaGFyZWRBcnJheUJ1ZmZlciAhPT0gJ3VuZGVmaW5lZCcgPyAn4pyTJyA6ICfinJcnfTwvbGk+XG4gICAgICAgICAgICAgICAgICAgICAgICA8bGk+QXRvbWljczogXFwke3R5cGVvZiBBdG9taWNzICE9PSAndW5kZWZpbmVkJyA/ICfinJMnIDogJ+Kclyd9PC9saT5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxsaT5XZWJXb3JrZXJzOiBcXCR7dHlwZW9mIFdvcmtlciAhPT0gJ3VuZGVmaW5lZCcgPyAn4pyTJyA6ICfinJcnfTwvbGk+XG4gICAgICAgICAgICAgICAgICAgIDwvdWw+XG4gICAgICAgICAgICAgICAgXFxgO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHdpbmRvdy5zd2FybSA9IHN3YXJtO1xuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBzdGF0dXMudGV4dENvbnRlbnQgPSAnRXJyb3I6ICcgKyBlcnJvci5tZXNzYWdlO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBydW5UZXN0cygpO1xuICAgIDwvc2NyaXB0PlxuPC9ib2R5PlxuPC9odG1sPmA7XG5cbiAgYXdhaXQgd3JpdGVGaWxlKFxuICAgIHBhdGguam9pbihfX2Rpcm5hbWUsICd3YXNtLXRlc3QuaHRtbCcpLFxuICAgIGh0bWxcbiAgKTtcbn0iXSwibWFwcGluZ3MiOiI7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsU0FBU0EsUUFBUSxFQUFFQyxFQUFFLEVBQUVDLE1BQU0sRUFBRUMsU0FBUyxFQUFFQyxRQUFRLFFBQVEsa0JBQWtCO0FBQzVFLFNBQVNDLFFBQVEsRUFBRUMsT0FBTyxFQUFFQyxNQUFNLFFBQVEsWUFBWTtBQUN0RCxPQUFPQyxJQUFJLE1BQU0sTUFBTTtBQUN2QixTQUFTQyxhQUFhLFFBQVEsS0FBSztBQUNuQyxTQUFTQyxZQUFZLFFBQVEsTUFBTTtBQUNuQyxTQUFTQyxRQUFRLFFBQVEsYUFBYTtBQUN0QyxP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